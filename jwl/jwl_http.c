/* Generated by re2c 1.3 on Thu Oct 15 11:41:34 2020 */
#line 1 "jwl/jwl_http.l"
/* Copyright (c) [2019] juruoyun developer team
   Juruoyun web lib is licensed under the Mulan PSL v1.
   You can use this software according to the terms and conditions of the Mulan PSL v1.
   You may obtain a copy of Mulan PSL v1 at:
      http://license.coscl.org.cn/MulanPSL
   THIS SOFTWARE IS PROVIDED ON AN "AS IS" BASIS, WITHOUT WARRANTIES OF ANY KIND, EITHER EXPRESS OR
   IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT, MERCHANTABILITY OR FIT FOR A PARTICULAR
   PURPOSE.
   See the Mulan PSL v1 for more details.*/
#include "jwl_http.h"
#if JWL_HTTP_ENABLE==1
jbl_var_operators_new(jwl_http_head_operators,jwl_http_head_free,jwl_http_head_copy,NULL,NULL,jwl_http_head_view_put,NULL);
jwl_http_head *jwl_http_head_new()
{
	jwl_http_head * this=jbl_malloc(sizeof(jwl_http_head));
	jbl_gc_init(this);
	jbl_gc_plus(this);
	jbl_var_set_operators(this,&jwl_http_head_operators);	
	this->status		=0;
	this->charset		=0;	
	this->content_type	=0;
	this->method		=0;
	this->protocol		=0;
	this->len			=0;
	this->total_len		=0;
	this->tren			=0;
	this->connection	=0;
	this->cache			=0;
	this->upgrade		=0;
	this->cache_max_age	=0;	
	this->range.start	=0;	
	this->range.end		=0;	
	this->etag			=NULL;
	this->filename		=NULL;
	this->url			=NULL;
	this->host			=NULL;
	this->ua			=NULL;
	this->referer		=NULL;
	this->cookie		=NULL;
	this->v				=NULL;	
	this->parameter		=NULL;	

	this->yy.cond		=0;	
	this->yy.state		=0;	
	this->yy.ch			=0;	
	this->yy.marker		=0;	
	this->yy.k			=NULL;	
	this->yy.v			=NULL;	
	return this;
}
jwl_http_head *jwl_http_head_free(jwl_http_head * this)
{
	if(!this)return NULL;
	jbl_gc_minus(this);
	if(!jbl_gc_refcnt(this))
	{
		if(jbl_gc_is_ref(this))
			jwl_http_head_free((jwl_http_head*)(((jbl_reference*)this)->ptr));
		else
		{
			this->etag			=jbl_string_free(this->etag);
			this->filename		=jbl_string_free(this->filename);
			this->url			=jbl_string_free(this->url);
			this->host			=jbl_string_free(this->host);
			this->ua			=jbl_string_free(this->ua);
			this->referer		=jbl_string_free(this->referer);
			this->v				=jbl_ht_free	(this->v);
			this->cookie		=jbl_ht_free	(this->cookie);
			this->parameter		=jbl_ht_free	(this->parameter);

			this->yy.k			=jbl_string_free(this->yy.k);
			this->yy.v			=jbl_var_free(this->yy.v);
		}
		jbl_free(this);
	}
	return NULL;	
	
}
jwl_http_head *jwl_http_head_clear(jwl_http_head * this)
{
	jwl_http_head *thi;
	this=jwl_http_head_extend(this,&thi);
	thi->status			=0;
	thi->charset		=0;	
	thi->content_type	=0;
	thi->method			=0;
	thi->protocol		=0;
	thi->len			=0;
	thi->total_len		=0;
	thi->tren			=0;
	thi->connection		=0;
	thi->cache			=0;
	thi->upgrade		=0;
	thi->cache_max_age	=0;	
	thi->range.start	=0;	
	thi->range.end		=0;	
	thi->yy.cond		=0;	
	thi->yy.state		=0;	
	thi->yy.ch			=0;	
	thi->yy.marker		=0;	
	thi->etag			=jbl_string_free(thi->etag);
	thi->filename		=jbl_string_free(thi->filename);
	thi->url			=jbl_string_free(thi->url);
	thi->host			=jbl_string_free(thi->host);
	thi->ua				=jbl_string_free(thi->ua);
	thi->referer		=jbl_string_free(thi->referer);
	thi->v				=jbl_ht_free	(thi->v);
	thi->cookie			=jbl_ht_free	(thi->cookie);
	thi->parameter		=jbl_ht_free	(thi->parameter);

	thi->yy.k			=jbl_string_free(thi->yy.k);
	thi->yy.v			=jbl_var_free(thi->yy.v);
	return this;
}
inline jwl_http_head *jwl_http_head_copy(jwl_http_head * this)
{
	jbl_gc_plus(this);
	return this;
}
inline jwl_http_head *jwl_http_head_extend(jwl_http_head * this,jwl_http_head **pthi)
{
	if(!this){this=jwl_http_head_new();if(pthi)*pthi=this;return this;}
	jbl_reference *ref=NULL;jwl_http_head *thi=jbl_refer_pull_keep_father(this,&ref);
	if((jbl_gc_refcnt(thi)<=1)){if(pthi)*pthi=thi;return this;}

	jwl_http_head * tmp	=jwl_http_head_new();
	
	tmp->status			=this->status;
	tmp->charset		=this->charset;
	tmp->content_type	=this->content_type;
	tmp->method			=this->method;
	tmp->protocol		=this->protocol;
	tmp->connection		=this->connection;
	tmp->len			=this->len;
	tmp->total_len		=this->total_len;
	tmp->tren			=this->tren;
	tmp->cache			=this->cache;
	tmp->upgrade		=this->upgrade;
	tmp->cache_max_age	=this->cache_max_age;
	tmp->range.start	=this->range.start;
	tmp->range.end		=this->range.end;
	tmp->etag			=jbl_string_copy(this->etag);
	tmp->filename		=jbl_string_copy(this->filename);	
	tmp->url			=jbl_string_copy(this->url);
	tmp->host			=jbl_string_copy(this->host);
	tmp->ua				=jbl_string_copy(this->ua);
	tmp->referer		=jbl_string_copy(this->referer);	
	tmp->cookie			=jbl_ht_copy(this->cookie);
	tmp->v				=jbl_ht_copy(this->v);
	tmp->parameter		=jbl_ht_copy(this->parameter);
	
	tmp->yy.cond		=this->yy.cond;
	tmp->yy.state		=this->yy.state;
	tmp->yy.ch			=this->yy.ch;
	tmp->yy.marker		=this->yy.marker;
	tmp->yy.k			=jbl_string_copy(this->yy.k);
	tmp->yy.v			=jbl_var_copy(this->yy.v);
	
	jwl_http_head_free(this);
	if(ref)		ref->ptr=tmp;
	else		this=tmp;
	if(pthi)	*pthi=tmp;	
	return this;
}
jwl_http_head *		jwl_http_head_set_status		(jwl_http_head * this,jbl_uint32			status)			{jwl_http_head *thi;this=jwl_http_head_extend(this,&thi);thi->status		=status			;return this;}
jwl_http_head *		jwl_http_head_set_charset		(jwl_http_head * this,jwl_http_charset		charset)		{jwl_http_head *thi;this=jwl_http_head_extend(this,&thi);thi->charset		=charset  		;return this;}
jwl_http_head *		jwl_http_head_set_content_type	(jwl_http_head * this,jbl_file_ct			content_type)	{jwl_http_head *thi;this=jwl_http_head_extend(this,&thi);thi->content_type	=content_type	;return this;}
jwl_http_head *		jwl_http_head_set_method		(jwl_http_head * this,jwl_http_method		method)			{jwl_http_head *thi;this=jwl_http_head_extend(this,&thi);thi->method		=method  		;return this;}
jwl_http_head *		jwl_http_head_set_protocol		(jwl_http_head * this,jwl_http_protocol		protocol)		{jwl_http_head *thi;this=jwl_http_head_extend(this,&thi);thi->protocol		=protocol  		;return this;}
jwl_http_head *		jwl_http_head_set_connection	(jwl_http_head * this,jwl_http_connection	connection)		{jwl_http_head *thi;this=jwl_http_head_extend(this,&thi);thi->connection	=connection		;return this;}
jwl_http_head *		jwl_http_head_set_cache			(jwl_http_head * this,jwl_http_cache		cache)			{jwl_http_head *thi;this=jwl_http_head_extend(this,&thi);thi->cache			=cache  		;return this;}
jwl_http_head *		jwl_http_head_set_upgrade		(jwl_http_head * this,jwl_http_upgrade		upgrade)		{jwl_http_head *thi;this=jwl_http_head_extend(this,&thi);thi->upgrade		=upgrade  		;return this;}
jwl_http_head *		jwl_http_head_set_tren			(jwl_http_head * this,jwl_http_tren			tren)			{jwl_http_head *thi;this=jwl_http_head_extend(this,&thi);thi->tren			=tren  			;return this;}
jwl_http_head *		jwl_http_head_set_length		(jwl_http_head * this,jbl_uint64			len)			{jwl_http_head *thi;this=jwl_http_head_extend(this,&thi);thi->len			=len			;return this;}
jwl_http_head *		jwl_http_head_set_total_length	(jwl_http_head * this,jbl_uint64			total_len)		{jwl_http_head *thi;this=jwl_http_head_extend(this,&thi);thi->total_len		=total_len		;return this;}
jwl_http_head *		jwl_http_head_set_cache_max_age	(jwl_http_head * this,jbl_uint32			cache_max_age)	{jwl_http_head *thi;this=jwl_http_head_extend(this,&thi);thi->cache_max_age	=cache_max_age	;return this;}
jwl_http_head *		jwl_http_head_set_range			(jwl_http_head * this,jwl_http_head_range	range)			{jwl_http_head *thi;this=jwl_http_head_extend(this,&thi);thi->range			=range			;return this;}
jwl_http_head *		jwl_http_head_set_etag			(jwl_http_head * this,jbl_string *	etag)					{jwl_http_head *thi;this=jwl_http_head_extend(this,&thi);jbl_string_free(thi->etag)			;thi->etag			=jbl_string_copy(etag)							;return this;}
jwl_http_head *		jwl_http_head_set_filename		(jwl_http_head * this,jbl_string * filename)				{jwl_http_head *thi;this=jwl_http_head_extend(this,&thi);jbl_string_free(thi->filename)		;thi->filename		=jbl_string_copy(filename)						;return this;}
jwl_http_head *		jwl_http_head_set_url			(jwl_http_head * this,jbl_string * url)						{jwl_http_head *thi;this=jwl_http_head_extend(this,&thi);jbl_string_free(thi->url)			;thi->url			=jbl_string_copy(url)							;return this;}
jwl_http_head *		jwl_http_head_set_host			(jwl_http_head * this,jbl_string * host)					{jwl_http_head *thi;this=jwl_http_head_extend(this,&thi);jbl_string_free(thi->host)			;thi->host			=jbl_string_copy(host)							;return this;}
jwl_http_head *		jwl_http_head_set_ua			(jwl_http_head * this,jbl_string * ua)						{jwl_http_head *thi;this=jwl_http_head_extend(this,&thi);jbl_string_free(thi->ua)			;thi->ua			=jbl_string_copy(ua)							;return this;}
jwl_http_head *		jwl_http_head_set_referer		(jwl_http_head * this,jbl_string * referer)					{jwl_http_head *thi;this=jwl_http_head_extend(this,&thi);jbl_string_free(thi->referer)		;thi->referer		=jbl_string_copy(referer)						;return this;}
jwl_http_head *		jwl_http_head_set				(jwl_http_head * this,unsigned char * key,void* var)		{jwl_http_head *thi;this=jwl_http_head_extend(this,&thi)									;thi->v				=jbl_ht_insert_chars(thi->v			,key,var)	;return this;}
jwl_http_head *		jwl_http_head_set_parameter		(jwl_http_head * this,unsigned char * key,void* var)		{jwl_http_head *thi;this=jwl_http_head_extend(this,&thi);									thi->parameter		=jbl_ht_insert_chars(thi->parameter	,key,var)	;return this;}
jwl_http_head *		jwl_http_head_set_cookie		(jwl_http_head * this,unsigned char * key,void* var)		{jwl_http_head *thi;this=jwl_http_head_extend(this,&thi);									thi->cookie			=jbl_ht_insert_chars(thi->cookie	,key,var)	;return this;}

jbl_uint32			jwl_http_head_get_status		(jwl_http_head * this){if(!this)return 0;this=jbl_refer_pull(this);return this->status;}
jwl_http_charset	jwl_http_head_get_charget		(jwl_http_head * this){if(!this)return 0;this=jbl_refer_pull(this);return this->charset;}
jbl_file_ct			jwl_http_head_get_content_type	(jwl_http_head * this){if(!this)return 0;this=jbl_refer_pull(this);return this->content_type;}
jwl_http_method		jwl_http_head_get_method		(jwl_http_head * this){if(!this)return 0;this=jbl_refer_pull(this);return this->method;}
jwl_http_protocol	jwl_http_head_get_protocol		(jwl_http_head * this){if(!this)return 0;this=jbl_refer_pull(this);return this->protocol;}
jwl_http_connection	jwl_http_head_get_connection	(jwl_http_head * this){if(!this)return 0;this=jbl_refer_pull(this);return this->connection;}
jwl_http_cache		jwl_http_head_get_cache			(jwl_http_head * this){if(!this)return 0;this=jbl_refer_pull(this);return this->cache;}
jwl_http_upgrade	jwl_http_head_get_upgrade		(jwl_http_head * this){if(!this)return 0;this=jbl_refer_pull(this);return this->upgrade;}
jwl_http_tren		jwl_http_head_get_tren			(jwl_http_head * this){if(!this)return 0;this=jbl_refer_pull(this);return this->tren;}
jbl_uint64			jwl_http_head_get_length		(jwl_http_head * this){if(!this)return 0;this=jbl_refer_pull(this);return this->len;}
jbl_uint64			jwl_http_head_get_total_length	(jwl_http_head * this){if(!this)return 0;this=jbl_refer_pull(this);return this->total_len;}
jbl_uint32			jwl_http_head_get_cache_max_age	(jwl_http_head * this){if(!this)return 0;this=jbl_refer_pull(this);return this->cache_max_age;}
jwl_http_head_range	jwl_http_head_get_range			(jwl_http_head * this){if(!this)return (jwl_http_head_range){0,0};this=jbl_refer_pull(this);return this->range;}
jbl_string *		jwl_http_head_get_etag			(jwl_http_head * this){if(!this)return NULL;this=jbl_refer_pull(this);return jbl_string_copy(this->etag);}
jbl_string *		jwl_http_head_get_filename		(jwl_http_head * this){if(!this)return NULL;this=jbl_refer_pull(this);return jbl_string_copy(this->filename);}
jbl_string *		jwl_http_head_get_url			(jwl_http_head * this){if(!this)return NULL;this=jbl_refer_pull(this);return jbl_string_copy(this->url);}
jbl_string *		jwl_http_head_get_host			(jwl_http_head * this){if(!this)return NULL;this=jbl_refer_pull(this);return jbl_string_copy(this->host);}
jbl_string *		jwl_http_head_get_ua			(jwl_http_head * this){if(!this)return NULL;this=jbl_refer_pull(this);return jbl_string_copy(this->ua);}
jbl_string *		jwl_http_head_get_referer		(jwl_http_head * this){if(!this)return NULL;this=jbl_refer_pull(this);return jbl_string_copy(this->referer);}
void       *		jwl_http_head_get				(jwl_http_head * this,unsigned char * key){if(!this)return NULL;this=jbl_refer_pull(this);if(!this->v)			return NULL;return jbl_ht_get_chars(this->v,key);}
void       *		jwl_http_head_get_parameter		(jwl_http_head * this,unsigned char * key){if(!this)return NULL;this=jbl_refer_pull(this);if(!this->parameter)	return NULL;return jbl_ht_get_chars(this->parameter,key);}
void       *		jwl_http_head_get_cookie		(jwl_http_head * this,unsigned char * key){if(!this)return NULL;this=jbl_refer_pull(this);if(!this->cookie)		return NULL;return jbl_ht_get_chars(this->cookie,key);}


void jwl_http_head_encode(jwl_http_head *head,jbl_stream *stream)
{
#define rn() jbl_stream_push_char(stream,'\r'),jbl_stream_push_char(stream,'\n')
	if(!head)return;
	head=jbl_refer_pull(head);
	if(jwl_http_head_is_response(head))
	{
		jbl_stream_push_chars(stream,UC"HTTP/1.1 ");
		jbl_stream_push_uint(stream,head->status);
		switch(head->status)
		{
			case 101:	jbl_stream_push_chars(stream,UC" Switching Protocols")	;break;
			case 200:	jbl_stream_push_chars(stream,UC" OK")				;break;
			case 206:	jbl_stream_push_chars(stream,UC" Partial Content")	;break;
			case 304:	jbl_stream_push_chars(stream,UC" Not Modified")		;break;
			case 404:	jbl_stream_push_chars(stream,UC" Not Found")		;break;
			case 416:	jbl_stream_push_chars(stream,UC" Range Not Satisfiable")		;break;
		}
	}
	else if(jwl_http_head_is_request(head)&&head->status==JWL_HTTP_STATUS_PROXY)
	{
		jbl_stream_push_chars(stream,UC"CONNECT ");
		jbl_stream_push_string(stream,head->host);
		jbl_stream_push_chars(stream,UC" HTTP/1.1\r\n\r\n");
		jbl_stream_do(stream,jbl_stream_force);
		return;
	}
	else
	{
		char * method		[]={"","GET ","POST "};
		char * protocol		[]={""," HTTP/1.1",""};
		jbl_stream_push_chars	(stream,UC method[head->method]);
		if(jbl_string_get_length(head->url))jbl_stream_push_string	(stream,head->url);
		else jbl_stream_push_char(stream,'/');
		if(head->parameter)
		{
			jbl_stream_push_char(stream,'?');
			jbl_uint8 f=0;
			jbl_ht_foreach(head->parameter,i)
			{
				if(f)jbl_stream_push_char(stream,'&');
				f=1;
				jbl_stream_push_string(stream,i->k);
				jbl_stream_push_char(stream,'=');
				if(jbl_var_is(i->v,jbl_string_operators))jbl_stream_push_string(stream,i->v);
				else					jbl_var_json_put(i->v,stream,0,0);
			}		
		}		
		jbl_stream_push_chars	(stream,UC protocol[head->protocol]);
	}
	rn();
	if(head->cache==JWL_HTTP_CACHE_MAX_AGE)
	{
		jbl_stream_push_chars(stream,UC"Cache-Control: max-age=")	,jbl_stream_push_uint(stream,head->cache_max_age)				,rn();
		jbl_time * t=jbl_time_add_second(jbl_time_now(NULL),head->cache_max_age);
//		jbl_stream_push_chars(stream,UC"Date: ")	,jbl_time_to_string_format(t,stream,UC JBL_TIME_FORMAT_RFC1123)					,rn();
//		jbl_stream_push_chars(stream,UC"Expires: ")	,jbl_time_to_string_format(t,stream,UC JBL_TIME_FORMAT_RFC1123)					,rn();
		t=jbl_time_free(t);
	}
	else
	{
		jbl_stream_push_chars(stream,UC"Pragma: no-cache")																			,rn();
		jbl_stream_push_chars(stream,UC"Cache-Control: no-cache")																	,rn();
	}
	if(head->connection)
	{
		char * connection[]={"","keep-alive","close","Upgrade"};
		jbl_uint8 f=0;
		jbl_stream_push_chars(stream,UC"Connection: ");
		if(head->connection&JWL_HTTP_CONNECTION_KEEP_ALIVE	){jbl_stream_push_chars(stream,UC connection[1]);f=1;}
		if(head->connection&JWL_HTTP_CONNECTION_CLOSE		){if(f)jbl_stream_push_chars(stream,UC", ");jbl_stream_push_chars(stream,UC connection[2]);f=1;}
		if(head->connection&JWL_HTTP_CONNECTION_UPGRADE		){if(f)jbl_stream_push_chars(stream,UC", ");jbl_stream_push_chars(stream,UC connection[3]);f=1;}
		rn();
	}
	if(head->connection==JWL_HTTP_CONNECTION_UPGRADE&&head->upgrade)
	{
		jbl_stream_push_chars(stream,UC"Upgrade: ");
		char * upgrade[]={"","websocket"};
		jbl_stream_push_chars(stream,UC upgrade[head->upgrade]);
		rn();
	}
	if(head->etag&&jwl_http_head_is_response(head))
		jbl_stream_push_chars(stream,UC"ETag: ")							,jbl_stream_push_string(stream,head->etag)				,rn();
	if(head->etag&&jwl_http_head_is_request(head))
		jbl_stream_push_chars(stream,UC"If-None-Match: ")					,jbl_stream_push_string(stream,head->etag)				,rn();
	if(head->content_type)
	{
		jbl_stream_push_chars(stream,UC"Content-Type: ")					,jbl_stream_push_chars(stream,jbl_file_get_ct_chars_by_ctid(head->content_type));
		char *charset[]={"","UTF-8"};
		if(head->charset)
			jbl_stream_push_chars(stream,UC"; charset=")					,jbl_stream_push_chars(stream,UC charset[head->charset]);
		rn();
	}
	if(!(head->tren&JWL_HTTP_TREN_CHUNKED))
	{
		jbl_stream_push_chars(stream,UC"Content-Length: ")						,jbl_stream_push_uint(stream,head->len)					,rn();
		if(head->status==206&&jwl_http_head_is_response(head))
			jbl_stream_push_chars(stream,UC"Content-Range: bytes ")				,jbl_stream_push_uint(stream,head->range.start)			,jbl_stream_push_char(stream,'-')	,jbl_stream_push_uint(stream,head->range.end?(head->range.end-1):0)	,jbl_stream_push_char(stream,'/')	,jbl_stream_push_uint(stream,head->total_len)	,rn();
	}
	if(jwl_http_head_is_request(head)&&(head->range.start||head->range.end))
		jbl_stream_push_chars(stream,UC"Range: bytes=")							,jbl_stream_push_uint(stream,head->range.start)			,jbl_stream_push_char(stream,'-')	,jbl_stream_push_uint(stream,head->range.end?(head->range.end-1):0),rn();		
	
	if(head->tren)
	{
		char * tren			[]={"","chunked","compress","deflate","gzip","identity"};
		jbl_uint8 f=0;
		if(jwl_http_head_is_response(head))		jbl_stream_push_chars(stream,UC"Transfer-Encoding: ");
		else									jbl_stream_push_chars(stream,UC"Accept-Encoding: ");
		if(head->tren&JWL_HTTP_TREN_CHUNKED		){jbl_stream_push_chars(stream,UC tren[1]);f=1;}
		if(head->tren&JWL_HTTP_TREN_COMPRESS	){if(f)jbl_stream_push_chars(stream,UC", ");jbl_stream_push_chars(stream,UC tren[2]);f=1;}
		if(head->tren&JWL_HTTP_TREN_DEFLATE		){if(f)jbl_stream_push_chars(stream,UC", ");jbl_stream_push_chars(stream,UC tren[3]);f=1;}
		if(head->tren&JWL_HTTP_TREN_GZIP		){if(f)jbl_stream_push_chars(stream,UC", ");jbl_stream_push_chars(stream,UC tren[4]);f=1;}
		if(head->tren&JWL_HTTP_TREN_IDENTITY	){if(f)jbl_stream_push_chars(stream,UC", ");jbl_stream_push_chars(stream,UC tren[5]);f=1;}
		rn();
	}	
	
	if(head->host&&jwl_http_head_is_request(head))
		jbl_stream_push_chars(stream,UC"Host: ")							,jbl_stream_push_string(stream,head->host)				,rn();	
	if(head->ua&&jwl_http_head_is_request(head))
		jbl_stream_push_chars(stream,UC"User-Agent: ")						,jbl_stream_push_string(stream,head->ua)				,rn();	
	
	
	if(jwl_http_head_is_response(head))
	{
		jbl_stream_push_chars(stream,UC"Server: "JWL_HTTP_RESPONSE_SERVER_NAME)														,rn();
		jbl_stream_push_chars(stream,UC"Accept-Ranges: bytes")																		,rn();
		if(head->filename)
		{
			jbl_stream_push_chars(stream,UC"Content-Disposition: attachment; filename=\"");
			jbl_stream_push_string(stream,head->filename);
			jbl_stream_push_char(stream,'"');
			rn();
		}
	}
	if(head->v)
		jbl_ht_foreach(head->v,i)
		{
			jbl_stream_push_string(stream,jbl_htk(i));
			jbl_stream_push_chars(stream,UC": ");
			if(jbl_var_is(i->v,jbl_string_operators))jbl_stream_push_string(stream,i->v);
			else					jbl_var_json_put(i->v,stream,0,0);
			rn();
		}
	rn();
#undef rn
}
#line 361 "jwl/jwl_http.c"
enum jwl_http_scanner_condition {
	jwl_http_scanner_condition_0,
	jwl_http_scanner_condition_start,
	jwl_http_scanner_condition_starts,
	jwl_http_scanner_condition_status,
	jwl_http_scanner_condition_url,
	jwl_http_scanner_condition_parameter,
	jwl_http_scanner_condition_parameterv,
	jwl_http_scanner_condition_protocol,
	jwl_http_scanner_condition_head_body,
	jwl_http_scanner_condition_head_host,
	jwl_http_scanner_condition_head_ua,
	jwl_http_scanner_condition_head_refer,
	jwl_http_scanner_condition_head_etag,
	jwl_http_scanner_condition_head_conn,
	jwl_http_scanner_condition_head_tren,
	jwl_http_scanner_condition_head_upgrade,
	jwl_http_scanner_condition_head_range_s,
	jwl_http_scanner_condition_head_range_e,
	jwl_http_scanner_condition_head_range_t,
	jwl_http_scanner_condition_head_cache,
	jwl_http_scanner_condition_head_ct,
	jwl_http_scanner_condition_head_cs,
	jwl_http_scanner_condition_head_cl,
	jwl_http_scanner_condition_head_cookie,
	jwl_http_scanner_condition_head_cookiev,
	jwl_http_scanner_condition_special_key,
	jwl_http_scanner_condition_special_var,
	jwl_http_scanner_condition_head_ign,
};
#line 358 "jwl/jwl_http.l"

jwl_http_head* __jwl_http_head_decode(jwl_http_head * head,unsigned char* in,unsigned char*YYLIMIT,jbl_string_size_type *start)
{
	jwl_http_head * hea;head=jwl_http_head_extend(head,&hea);
	jbl_string_size_type _=0;if(!start)start=&_;
#define upd *start=YYCURSOR-in	
	unsigned char	*	YYCURSOR=in+*start;
//
#line 401 "jwl/jwl_http.c"

	switch (hea->yy.state) {
	default: goto yy0;
	case 0: goto yyFillLabel0;
	case 1: goto yyFillLabel1;
	case 2: goto yyFillLabel2;
	case 3: goto yyFillLabel3;
	case 4: goto yyFillLabel4;
	case 5: goto yyFillLabel5;
	case 6: goto yyFillLabel6;
	case 7: goto yyFillLabel7;
	case 8: goto yyFillLabel8;
	case 9: goto yyFillLabel9;
	case 10: goto yyFillLabel10;
	case 11: goto yyFillLabel11;
	case 12: goto yyFillLabel12;
	case 13: goto yyFillLabel13;
	case 14: goto yyFillLabel14;
	case 15: goto yyFillLabel15;
	case 16: goto yyFillLabel16;
	case 17: goto yyFillLabel17;
	case 18: goto yyFillLabel18;
	case 19: goto yyFillLabel19;
	case 20: goto yyFillLabel20;
	case 21: goto yyFillLabel21;
	case 22: goto yyFillLabel22;
	case 23: goto yyFillLabel23;
	case 24: goto yyFillLabel24;
	case 25: goto yyFillLabel25;
	case 26: goto yyFillLabel26;
	case 27: goto yyFillLabel27;
	case 28: goto yyFillLabel28;
	case 29: goto yyFillLabel29;
	case 30: goto yyFillLabel30;
	case 31: goto yyFillLabel31;
	case 32: goto yyFillLabel32;
	case 33: goto yyFillLabel33;
	case 34: goto yyFillLabel34;
	case 35: goto yyFillLabel35;
	case 36: goto yyFillLabel36;
	case 37: goto yyFillLabel37;
	case 38: goto yyFillLabel38;
	case 39: goto yyFillLabel39;
	case 40: goto yyFillLabel40;
	case 41: goto yyFillLabel41;
	case 42: goto yyFillLabel42;
	case 43: goto yyFillLabel43;
	case 44: goto yyFillLabel44;
	case 45: goto yyFillLabel45;
	case 46: goto yyFillLabel46;
	}
yy0:
	switch (hea->yy.cond) {
	case jwl_http_scanner_condition_0: goto yyc_0;
	case jwl_http_scanner_condition_start: goto yyc_start;
	case jwl_http_scanner_condition_starts: goto yyc_starts;
	case jwl_http_scanner_condition_status: goto yyc_status;
	case jwl_http_scanner_condition_url: goto yyc_url;
	case jwl_http_scanner_condition_parameter: goto yyc_parameter;
	case jwl_http_scanner_condition_parameterv: goto yyc_parameterv;
	case jwl_http_scanner_condition_protocol: goto yyc_protocol;
	case jwl_http_scanner_condition_head_body: goto yyc_head_body;
	case jwl_http_scanner_condition_head_host: goto yyc_head_host;
	case jwl_http_scanner_condition_head_ua: goto yyc_head_ua;
	case jwl_http_scanner_condition_head_refer: goto yyc_head_refer;
	case jwl_http_scanner_condition_head_etag: goto yyc_head_etag;
	case jwl_http_scanner_condition_head_conn: goto yyc_head_conn;
	case jwl_http_scanner_condition_head_tren: goto yyc_head_tren;
	case jwl_http_scanner_condition_head_upgrade: goto yyc_head_upgrade;
	case jwl_http_scanner_condition_head_range_s: goto yyc_head_range_s;
	case jwl_http_scanner_condition_head_range_e: goto yyc_head_range_e;
	case jwl_http_scanner_condition_head_range_t: goto yyc_head_range_t;
	case jwl_http_scanner_condition_head_cache: goto yyc_head_cache;
	case jwl_http_scanner_condition_head_ct: goto yyc_head_ct;
	case jwl_http_scanner_condition_head_cs: goto yyc_head_cs;
	case jwl_http_scanner_condition_head_cl: goto yyc_head_cl;
	case jwl_http_scanner_condition_head_cookie: goto yyc_head_cookie;
	case jwl_http_scanner_condition_head_cookiev: goto yyc_head_cookiev;
	case jwl_http_scanner_condition_special_key: goto yyc_special_key;
	case jwl_http_scanner_condition_special_var: goto yyc_special_var;
	case jwl_http_scanner_condition_head_ign: goto yyc_head_ign;
	}
/* *********************************** */
yyc_0:
	hea->yy.cond = (jwl_http_scanner_condition_start);
	goto yyc_start;
/* *********************************** */
yyc_start:
	hea->yy.state = (0);
	if ((YYLIMIT - YYCURSOR) < 8) {upd;return head;}
yyFillLabel0:
	hea->yy.ch = *(hea->yy.marker = YYCURSOR);
	switch (hea->yy.ch) {
	case 0x00:	goto yy7;
	case ' ':	goto yy9;
	case 'G':	goto yy11;
	case 'H':	goto yy13;
	case 'P':	goto yy14;
	default:	goto yy6;
	}
yy6:
#line 383 "jwl/jwl_http.l"
	{   ;																				;++YYCURSOR;upd	;goto yyc_starts	;}
#line 505 "jwl/jwl_http.c"
yy7:
	++YYCURSOR;
#line 507 "jwl/jwl_http.l"
	{return head;}
#line 510 "jwl/jwl_http.c"
yy9:
	++YYCURSOR;
	hea->yy.cond = (jwl_http_scanner_condition_url);
#line 384 "jwl/jwl_http.l"
	{upd;hea->url			=jbl_string_free    (hea->url)												;goto yyc_url		;}
#line 516 "jwl/jwl_http.c"
yy11:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'E':	goto yy15;
	default:	goto yy12;
	}
yy12:
	YYCURSOR = hea->yy.marker;
	goto yy6;
yy13:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'T':	goto yy16;
	default:	goto yy12;
	}
yy14:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'O':	goto yy17;
	default:	goto yy12;
	}
yy15:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'T':	goto yy18;
	default:	goto yy12;
	}
yy16:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'T':	goto yy20;
	default:	goto yy12;
	}
yy17:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'S':	goto yy21;
	default:	goto yy12;
	}
yy18:
	++YYCURSOR;
#line 381 "jwl/jwl_http.l"
	{upd;hea->method		=JWL_HTTP_METHOD_GET			;hea=jwl_http_head_set_request(hea)			;goto yyc_start		;}
#line 560 "jwl/jwl_http.c"
yy20:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'P':	goto yy22;
	default:	goto yy12;
	}
yy21:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'T':	goto yy23;
	default:	goto yy12;
	}
yy22:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case '/':	goto yy25;
	default:	goto yy12;
	}
yy23:
	++YYCURSOR;
#line 380 "jwl/jwl_http.l"
	{upd;hea->method		=JWL_HTTP_METHOD_POST			;hea=jwl_http_head_set_request(hea)			;goto yyc_start		;}
#line 583 "jwl/jwl_http.c"
yy25:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case '1':	goto yy26;
	default:	goto yy12;
	}
yy26:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case '.':	goto yy27;
	default:	goto yy12;
	}
yy27:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case '1':	goto yy28;
	default:	goto yy12;
	}
yy28:
	++YYCURSOR;
	hea->yy.cond = (jwl_http_scanner_condition_starts);
#line 382 "jwl/jwl_http.l"
	{upd;hea->protocol		=JWL_HTTP_PROTOCOL_HTTP_1_1		;hea=jwl_http_head_set_response(hea)		;goto yyc_starts	;}
#line 607 "jwl/jwl_http.c"
/* *********************************** */
yyc_starts:
	hea->yy.state = (1);
	if (YYLIMIT <= YYCURSOR) {upd;return head;}
yyFillLabel1:
	hea->yy.ch = *YYCURSOR;
	switch (hea->yy.ch) {
	case 0x00:	goto yy33;
	case ' ':	goto yy35;
	default:	goto yy32;
	}
yy32:
yy33:
	++YYCURSOR;
#line 507 "jwl/jwl_http.l"
	{return head;}
#line 624 "jwl/jwl_http.c"
yy35:
	++YYCURSOR;
	hea->yy.cond = (jwl_http_scanner_condition_status);
#line 385 "jwl/jwl_http.l"
	{upd;hea->status		=0																			;goto yyc_status	;}
#line 630 "jwl/jwl_http.c"
/* *********************************** */
yyc_status:
	hea->yy.state = (2);
	if ((YYLIMIT - YYCURSOR) < 2) {upd;return head;}
yyFillLabel2:
	hea->yy.ch = *(hea->yy.marker = YYCURSOR);
	switch (hea->yy.ch) {
	case 0x00:	goto yy40;
	case '\r':	goto yy42;
	case '0':
	case '1':
	case '2':
	case '3':
	case '4':
	case '5':
	case '6':
	case '7':
	case '8':
	case '9':	goto yy44;
	default:	goto yy39;
	}
yy39:
#line 388 "jwl/jwl_http.l"
	{   ;																				;++YYCURSOR;upd	;goto yyc_status	;}
#line 655 "jwl/jwl_http.c"
yy40:
	++YYCURSOR;
#line 507 "jwl/jwl_http.l"
	{return head;}
#line 660 "jwl/jwl_http.c"
yy42:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case '\n':	goto yy46;
	default:	goto yy43;
	}
yy43:
	YYCURSOR = hea->yy.marker;
	goto yy39;
yy44:
	++YYCURSOR;
#line 387 "jwl/jwl_http.l"
	{upd;hea->status		=((hea->status<<3)+(hea->status<<1)+*(YYCURSOR-1)-'0')						;goto yyc_status	;}
#line 674 "jwl/jwl_http.c"
yy46:
	++YYCURSOR;
	hea->yy.cond = (jwl_http_scanner_condition_head_body);
#line 389 "jwl/jwl_http.l"
	{upd;																								;goto yyc_head_body	;}
#line 680 "jwl/jwl_http.c"
/* *********************************** */
yyc_url:
	hea->yy.state = (3);
	if (YYLIMIT <= YYCURSOR) {upd;return head;}
yyFillLabel3:
	hea->yy.ch = *YYCURSOR;
	switch (hea->yy.ch) {
	case 0x00:	goto yy51;
	case ' ':	goto yy53;
	case '?':	goto yy55;
	default:	goto yy50;
	}
yy50:
#line 391 "jwl/jwl_http.l"
	{   ;hea->url			=jbl_string_add_char(hea->url,*YYCURSOR)					;++YYCURSOR;upd	;goto yyc_url		;}
#line 696 "jwl/jwl_http.c"
yy51:
	++YYCURSOR;
#line 507 "jwl/jwl_http.l"
	{return head;}
#line 701 "jwl/jwl_http.c"
yy53:
	++YYCURSOR;
	hea->yy.cond = (jwl_http_scanner_condition_protocol);
#line 392 "jwl/jwl_http.l"
	{upd;																								;goto yyc_protocol	;}
#line 707 "jwl/jwl_http.c"
yy55:
	++YYCURSOR;
	hea->yy.cond = (jwl_http_scanner_condition_parameter);
#line 393 "jwl/jwl_http.l"
	{upd;hea->yy.k			=jbl_string_free(hea->yy.k)													;goto yyc_parameter	;}
#line 713 "jwl/jwl_http.c"
/* *********************************** */
yyc_parameter:
	hea->yy.state = (4);
	if (YYLIMIT <= YYCURSOR) {upd;return head;}
yyFillLabel4:
	hea->yy.ch = *YYCURSOR;
	switch (hea->yy.ch) {
	case 0x00:	goto yy60;
	case ' ':	goto yy62;
	case '&':	goto yy64;
	case '=':	goto yy66;
	default:	goto yy59;
	}
yy59:
#line 394 "jwl/jwl_http.l"
	{   ;hea->yy.k			=jbl_string_add_char(hea->yy.k,*YYCURSOR)					;++YYCURSOR;upd	;goto yyc_parameter	;}
#line 730 "jwl/jwl_http.c"
yy60:
	++YYCURSOR;
#line 507 "jwl/jwl_http.l"
	{return head;}
#line 735 "jwl/jwl_http.c"
yy62:
	++YYCURSOR;
	hea->yy.cond = (jwl_http_scanner_condition_protocol);
#line 395 "jwl/jwl_http.l"
	{upd;hea->yy.k			=jbl_string_free(hea->yy.k);hea->yy.v=jbl_var_free(hea->yy.v)				;goto yyc_protocol	;}
#line 741 "jwl/jwl_http.c"
yy64:
	++YYCURSOR;
#line 396 "jwl/jwl_http.l"
	{upd;hea->yy.k			=jbl_string_free(hea->yy.k);hea->yy.v=jbl_var_free(hea->yy.v)				;goto yyc_parameter	;}
#line 746 "jwl/jwl_http.c"
yy66:
	++YYCURSOR;
	hea->yy.cond = (jwl_http_scanner_condition_parameterv);
#line 397 "jwl/jwl_http.l"
	{upd;hea->yy.v			=jbl_var_free(hea->yy.v);hea->yy.v=jbl_string_new()						;goto yyc_parameterv;}
#line 752 "jwl/jwl_http.c"
/* *********************************** */
yyc_parameterv:
	hea->yy.state = (5);
	if (YYLIMIT <= YYCURSOR) {upd;return head;}
yyFillLabel5:
	hea->yy.ch = *YYCURSOR;
	switch (hea->yy.ch) {
	case 0x00:	goto yy71;
	case ' ':	goto yy73;
	case '&':	goto yy75;
	default:	goto yy70;
	}
yy70:
#line 398 "jwl/jwl_http.l"
	{   ;hea->yy.v			=jbl_string_add_char(hea->yy.v,*YYCURSOR);++YYCURSOR;upd;goto yyc_parameterv;}
#line 768 "jwl/jwl_http.c"
yy71:
	++YYCURSOR;
#line 507 "jwl/jwl_http.l"
	{return head;}
#line 773 "jwl/jwl_http.c"
yy73:
	++YYCURSOR;
	hea->yy.cond = (jwl_http_scanner_condition_protocol);
#line 400 "jwl/jwl_http.l"
	{upd;hea->parameter		=jbl_ht_insert(hea->parameter,hea->yy.k,hea->yy.v);hea->yy.k=jbl_string_free(hea->yy.k);hea->yy.v=jbl_var_free(hea->yy.v);			;goto yyc_protocol	;}
#line 779 "jwl/jwl_http.c"
yy75:
	++YYCURSOR;
	hea->yy.cond = (jwl_http_scanner_condition_head_body);
#line 399 "jwl/jwl_http.l"
	{upd;hea->parameter		=jbl_ht_insert(hea->parameter,hea->yy.k,hea->yy.v);hea->yy.k=jbl_string_free(hea->yy.k);hea->yy.v=jbl_var_free(hea->yy.v);			;goto yyc_parameter	;}
#line 785 "jwl/jwl_http.c"
/* *********************************** */
yyc_protocol:
	hea->yy.state = (6);
	if ((YYLIMIT - YYCURSOR) < 8) {upd;return head;}
yyFillLabel6:
	hea->yy.ch = *YYCURSOR;
	switch (hea->yy.ch) {
	case 0x00:	goto yy80;
	case '\r':	goto yy82;
	case 'H':	goto yy83;
	default:	goto yy79;
	}
yy79:
yy80:
	++YYCURSOR;
#line 507 "jwl/jwl_http.l"
	{return head;}
#line 803 "jwl/jwl_http.c"
yy82:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case '\n':	goto yy84;
	default:	goto yy79;
	}
yy83:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'T':	goto yy86;
	default:	goto yy79;
	}
yy84:
	++YYCURSOR;
	hea->yy.cond = (jwl_http_scanner_condition_head_body);
#line 404 "jwl/jwl_http.l"
	{upd;																								;goto yyc_head_body	;}
#line 821 "jwl/jwl_http.c"
yy86:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'T':	goto yy87;
	default:	goto yy79;
	}
yy87:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'P':	goto yy88;
	default:	goto yy79;
	}
yy88:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case '/':	goto yy89;
	default:	goto yy79;
	}
yy89:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case '1':	goto yy90;
	default:	goto yy79;
	}
yy90:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case '.':	goto yy91;
	default:	goto yy79;
	}
yy91:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case '1':	goto yy92;
	default:	goto yy79;
	}
yy92:
	++YYCURSOR;
#line 403 "jwl/jwl_http.l"
	{upd;hea->protocol		=JWL_HTTP_PROTOCOL_HTTP_1_1													;goto yyc_protocol	;}
#line 862 "jwl/jwl_http.c"
/* *********************************** */
yyc_head_body:
	hea->yy.state = (7);
	if ((YYLIMIT - YYCURSOR) < 18) {upd;return head;}
yyFillLabel7:
	hea->yy.ch = *(hea->yy.marker = YYCURSOR);
	switch (hea->yy.ch) {
	case 0x00:	goto yy97;
	case '\r':	goto yy99;
	case 'A':	goto yy101;
	case 'C':	goto yy102;
	case 'E':	goto yy103;
	case 'H':	goto yy104;
	case 'I':	goto yy105;
	case 'P':	goto yy106;
	case 'R':	goto yy107;
	case 'S':	goto yy108;
	case 'T':	goto yy109;
	case 'U':	goto yy110;
	default:	goto yy96;
	}
yy96:
	hea->yy.cond = (jwl_http_scanner_condition_special_key);
#line 493 "jwl/jwl_http.l"
	{   ;hea->yy.k			=jbl_string_add_char(jbl_string_free(hea->yy.k),*YYCURSOR)	;++YYCURSOR;upd	;goto yyc_special_key;}
#line 888 "jwl/jwl_http.c"
yy97:
	++YYCURSOR;
#line 507 "jwl/jwl_http.l"
	{return head;}
#line 893 "jwl/jwl_http.c"
yy99:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case '\n':	goto yy111;
	default:	goto yy100;
	}
yy100:
	YYCURSOR = hea->yy.marker;
	goto yy96;
yy101:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'c':	goto yy113;
	default:	goto yy100;
	}
yy102:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'a':	goto yy114;
	case 'o':	goto yy115;
	default:	goto yy100;
	}
yy103:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 't':	goto yy116;
	default:	goto yy100;
	}
yy104:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'o':	goto yy117;
	default:	goto yy100;
	}
yy105:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'f':	goto yy118;
	default:	goto yy100;
	}
yy106:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'r':	goto yy119;
	default:	goto yy100;
	}
yy107:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'a':	goto yy120;
	case 'e':	goto yy121;
	default:	goto yy100;
	}
yy108:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'e':	goto yy122;
	default:	goto yy100;
	}
yy109:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'r':	goto yy123;
	default:	goto yy100;
	}
yy110:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'p':	goto yy124;
	case 's':	goto yy125;
	default:	goto yy100;
	}
yy111:
	++YYCURSOR;
#line 506 "jwl/jwl_http.l"
	{upd;hea->yy.cond=-1;return head;}
#line 970 "jwl/jwl_http.c"
yy113:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'c':	goto yy126;
	default:	goto yy100;
	}
yy114:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'c':	goto yy127;
	default:	goto yy100;
	}
yy115:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'n':	goto yy128;
	case 'o':	goto yy129;
	default:	goto yy100;
	}
yy116:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'a':	goto yy130;
	default:	goto yy100;
	}
yy117:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 's':	goto yy131;
	default:	goto yy100;
	}
yy118:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case '-':	goto yy132;
	default:	goto yy100;
	}
yy119:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'a':	goto yy133;
	default:	goto yy100;
	}
yy120:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'n':	goto yy134;
	default:	goto yy100;
	}
yy121:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'f':	goto yy135;
	default:	goto yy100;
	}
yy122:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'r':	goto yy136;
	default:	goto yy100;
	}
yy123:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'a':	goto yy137;
	default:	goto yy100;
	}
yy124:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'g':	goto yy138;
	default:	goto yy100;
	}
yy125:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'e':	goto yy139;
	default:	goto yy100;
	}
yy126:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'e':	goto yy140;
	default:	goto yy100;
	}
yy127:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'h':	goto yy141;
	default:	goto yy100;
	}
yy128:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'n':	goto yy142;
	case 't':	goto yy143;
	default:	goto yy100;
	}
yy129:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'k':	goto yy144;
	default:	goto yy100;
	}
yy130:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'g':	goto yy145;
	default:	goto yy100;
	}
yy131:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 't':	goto yy146;
	default:	goto yy100;
	}
yy132:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'N':	goto yy147;
	default:	goto yy100;
	}
yy133:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'g':	goto yy148;
	default:	goto yy100;
	}
yy134:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'g':	goto yy149;
	default:	goto yy100;
	}
yy135:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'e':	goto yy150;
	default:	goto yy100;
	}
yy136:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'v':	goto yy151;
	default:	goto yy100;
	}
yy137:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'n':	goto yy152;
	default:	goto yy100;
	}
yy138:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'r':	goto yy153;
	default:	goto yy100;
	}
yy139:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'r':	goto yy154;
	default:	goto yy100;
	}
yy140:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'p':	goto yy155;
	default:	goto yy100;
	}
yy141:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'e':	goto yy156;
	default:	goto yy100;
	}
yy142:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'e':	goto yy157;
	default:	goto yy100;
	}
yy143:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'e':	goto yy158;
	default:	goto yy100;
	}
yy144:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'i':	goto yy159;
	default:	goto yy100;
	}
yy145:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case ':':	goto yy160;
	default:	goto yy100;
	}
yy146:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case ':':	goto yy163;
	default:	goto yy100;
	}
yy147:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'o':	goto yy166;
	default:	goto yy100;
	}
yy148:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'm':	goto yy167;
	default:	goto yy100;
	}
yy149:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'e':	goto yy168;
	default:	goto yy100;
	}
yy150:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'r':	goto yy169;
	default:	goto yy100;
	}
yy151:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'e':	goto yy170;
	default:	goto yy100;
	}
yy152:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 's':	goto yy171;
	default:	goto yy100;
	}
yy153:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'a':	goto yy172;
	default:	goto yy100;
	}
yy154:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case '-':	goto yy173;
	default:	goto yy100;
	}
yy155:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 't':	goto yy174;
	default:	goto yy100;
	}
yy156:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case '-':	goto yy175;
	default:	goto yy100;
	}
yy157:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'c':	goto yy176;
	default:	goto yy100;
	}
yy158:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'n':	goto yy177;
	default:	goto yy100;
	}
yy159:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'e':	goto yy178;
	default:	goto yy100;
	}
yy160:
	++YYCURSOR;
	hea->yy.state = (8);
	if (YYLIMIT <= YYCURSOR) {upd;return head;}
yyFillLabel8:
	hea->yy.ch = *YYCURSOR;
	switch (hea->yy.ch) {
	case ' ':	goto yy160;
	default:	goto yy162;
	}
yy162:
	hea->yy.cond = (jwl_http_scanner_condition_head_etag);
#line 419 "jwl/jwl_http.l"
	{upd;hea->etag			=jbl_string_free(hea->etag)													;goto yyc_head_etag	;}
#line 1269 "jwl/jwl_http.c"
yy163:
	++YYCURSOR;
	hea->yy.state = (9);
	if (YYLIMIT <= YYCURSOR) {upd;return head;}
yyFillLabel9:
	hea->yy.ch = *YYCURSOR;
	switch (hea->yy.ch) {
	case ' ':	goto yy163;
	default:	goto yy165;
	}
yy165:
	hea->yy.cond = (jwl_http_scanner_condition_head_host);
#line 406 "jwl/jwl_http.l"
	{upd;hea->host			=jbl_string_free(hea->host)													;goto yyc_head_host	;}
#line 1284 "jwl/jwl_http.c"
yy166:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'n':	goto yy179;
	default:	goto yy100;
	}
yy167:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'a':	goto yy180;
	default:	goto yy100;
	}
yy168:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case ':':	goto yy181;
	default:	goto yy100;
	}
yy169:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'e':	goto yy183;
	default:	goto yy100;
	}
yy170:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'r':	goto yy184;
	default:	goto yy100;
	}
yy171:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'f':	goto yy185;
	default:	goto yy100;
	}
yy172:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'd':	goto yy186;
	default:	goto yy100;
	}
yy173:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'A':	goto yy187;
	default:	goto yy100;
	}
yy174:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case '-':	goto yy188;
	case ':':	goto yy189;
	default:	goto yy100;
	}
yy175:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'C':	goto yy192;
	default:	goto yy100;
	}
yy176:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 't':	goto yy193;
	default:	goto yy100;
	}
yy177:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 't':	goto yy194;
	default:	goto yy100;
	}
yy178:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case ':':	goto yy195;
	default:	goto yy100;
	}
yy179:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'e':	goto yy198;
	default:	goto yy100;
	}
yy180:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case ':':	goto yy199;
	default:	goto yy100;
	}
yy181:
	++YYCURSOR;
	hea->yy.state = (10);
	if ((YYLIMIT - YYCURSOR) < 6) {upd;return head;}
yyFillLabel10:
	hea->yy.ch = *YYCURSOR;
	switch (hea->yy.ch) {
	case ' ':	goto yy181;
	case 'b':	goto yy200;
	default:	goto yy100;
	}
yy183:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'r':	goto yy201;
	default:	goto yy100;
	}
yy184:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case ':':	goto yy202;
	default:	goto yy100;
	}
yy185:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'e':	goto yy205;
	default:	goto yy100;
	}
yy186:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'e':	goto yy206;
	default:	goto yy100;
	}
yy187:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'g':	goto yy207;
	default:	goto yy100;
	}
yy188:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'E':	goto yy208;
	case 'L':	goto yy209;
	default:	goto yy100;
	}
yy189:
	++YYCURSOR;
	hea->yy.state = (11);
	if (YYLIMIT <= YYCURSOR) {upd;return head;}
yyFillLabel11:
	hea->yy.ch = *YYCURSOR;
	switch (hea->yy.ch) {
	case ' ':	goto yy189;
	default:	goto yy191;
	}
yy191:
	hea->yy.cond = (jwl_http_scanner_condition_head_ign);
#line 501 "jwl/jwl_http.l"
	{upd;																								;goto yyc_head_ign	;}
#line 1438 "jwl/jwl_http.c"
yy192:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'o':	goto yy210;
	default:	goto yy100;
	}
yy193:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'i':	goto yy211;
	default:	goto yy100;
	}
yy194:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case '-':	goto yy212;
	default:	goto yy100;
	}
yy195:
	++YYCURSOR;
	hea->yy.state = (12);
	if (YYLIMIT <= YYCURSOR) {upd;return head;}
yyFillLabel12:
	hea->yy.ch = *YYCURSOR;
	switch (hea->yy.ch) {
	case ' ':	goto yy195;
	default:	goto yy197;
	}
yy197:
	hea->yy.cond = (jwl_http_scanner_condition_head_cookie);
#line 484 "jwl/jwl_http.l"
	{upd;hea->yy.k			=jbl_string_free(hea->yy.k)													;goto yyc_head_cookie;}
#line 1471 "jwl/jwl_http.c"
yy198:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case '-':	goto yy213;
	default:	goto yy100;
	}
yy199:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case ' ':	goto yy214;
	default:	goto yy100;
	}
yy200:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'y':	goto yy216;
	default:	goto yy100;
	}
yy201:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case ':':	goto yy217;
	default:	goto yy100;
	}
yy202:
	++YYCURSOR;
	hea->yy.state = (13);
	if (YYLIMIT <= YYCURSOR) {upd;return head;}
yyFillLabel13:
	hea->yy.ch = *YYCURSOR;
	switch (hea->yy.ch) {
	case ' ':	goto yy202;
	default:	goto yy204;
	}
yy204:
	hea->yy.cond = (jwl_http_scanner_condition_head_ign);
#line 500 "jwl/jwl_http.l"
	{upd;																								;goto yyc_head_ign	;}
#line 1510 "jwl/jwl_http.c"
yy205:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'r':	goto yy220;
	default:	goto yy100;
	}
yy206:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case ':':	goto yy221;
	default:	goto yy100;
	}
yy207:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'e':	goto yy224;
	default:	goto yy100;
	}
yy208:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'n':	goto yy225;
	default:	goto yy100;
	}
yy209:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'a':	goto yy226;
	default:	goto yy100;
	}
yy210:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'n':	goto yy227;
	default:	goto yy100;
	}
yy211:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'o':	goto yy228;
	default:	goto yy100;
	}
yy212:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'L':	goto yy229;
	case 'R':	goto yy230;
	case 'T':	goto yy231;
	default:	goto yy100;
	}
yy213:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'M':	goto yy232;
	default:	goto yy100;
	}
yy214:
	++YYCURSOR;
	hea->yy.cond = (jwl_http_scanner_condition_head_cache);
#line 464 "jwl/jwl_http.l"
	{upd;																								;goto yyc_head_cache;}
#line 1572 "jwl/jwl_http.c"
yy216:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 't':	goto yy233;
	default:	goto yy100;
	}
yy217:
	++YYCURSOR;
	hea->yy.state = (14);
	if (YYLIMIT <= YYCURSOR) {upd;return head;}
yyFillLabel14:
	hea->yy.ch = *YYCURSOR;
	switch (hea->yy.ch) {
	case ' ':	goto yy217;
	default:	goto yy219;
	}
yy219:
	hea->yy.cond = (jwl_http_scanner_condition_head_refer);
#line 414 "jwl/jwl_http.l"
	{upd;hea->referer		=jbl_string_free(hea->referer)												;goto yyc_head_refer;}
#line 1593 "jwl/jwl_http.c"
yy220:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case '-':	goto yy234;
	default:	goto yy100;
	}
yy221:
	++YYCURSOR;
	hea->yy.state = (15);
	if (YYLIMIT <= YYCURSOR) {upd;return head;}
yyFillLabel15:
	hea->yy.ch = *YYCURSOR;
	switch (hea->yy.ch) {
	case ' ':	goto yy221;
	default:	goto yy223;
	}
yy223:
	hea->yy.cond = (jwl_http_scanner_condition_head_upgrade);
#line 443 "jwl/jwl_http.l"
	{upd;																								;goto yyc_head_upgrade;}
#line 1614 "jwl/jwl_http.c"
yy224:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'n':	goto yy235;
	default:	goto yy100;
	}
yy225:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'c':	goto yy236;
	default:	goto yy100;
	}
yy226:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'n':	goto yy237;
	default:	goto yy100;
	}
yy227:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 't':	goto yy238;
	default:	goto yy100;
	}
yy228:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'n':	goto yy239;
	default:	goto yy100;
	}
yy229:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'e':	goto yy240;
	default:	goto yy100;
	}
yy230:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'a':	goto yy241;
	default:	goto yy100;
	}
yy231:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'y':	goto yy242;
	default:	goto yy100;
	}
yy232:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'a':	goto yy243;
	default:	goto yy100;
	}
yy233:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'e':	goto yy244;
	default:	goto yy100;
	}
yy234:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'E':	goto yy245;
	default:	goto yy100;
	}
yy235:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 't':	goto yy246;
	default:	goto yy100;
	}
yy236:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'o':	goto yy247;
	default:	goto yy100;
	}
yy237:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'g':	goto yy248;
	default:	goto yy100;
	}
yy238:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'r':	goto yy249;
	default:	goto yy100;
	}
yy239:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case ':':	goto yy250;
	default:	goto yy100;
	}
yy240:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'n':	goto yy253;
	default:	goto yy100;
	}
yy241:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'n':	goto yy254;
	default:	goto yy100;
	}
yy242:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'p':	goto yy255;
	default:	goto yy100;
	}
yy243:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 't':	goto yy256;
	default:	goto yy100;
	}
yy244:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 's':	goto yy257;
	default:	goto yy100;
	}
yy245:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'n':	goto yy258;
	default:	goto yy100;
	}
yy246:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case ':':	goto yy259;
	default:	goto yy100;
	}
yy247:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'd':	goto yy262;
	default:	goto yy100;
	}
yy248:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'u':	goto yy263;
	default:	goto yy100;
	}
yy249:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'o':	goto yy264;
	default:	goto yy100;
	}
yy250:
	++YYCURSOR;
	hea->yy.state = (16);
	if (YYLIMIT <= YYCURSOR) {upd;return head;}
yyFillLabel16:
	hea->yy.ch = *YYCURSOR;
	switch (hea->yy.ch) {
	case ' ':	goto yy250;
	default:	goto yy252;
	}
yy252:
	hea->yy.cond = (jwl_http_scanner_condition_head_conn);
#line 424 "jwl/jwl_http.l"
	{upd;																								;goto yyc_head_conn	;}
#line 1785 "jwl/jwl_http.c"
yy253:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'g':	goto yy265;
	default:	goto yy100;
	}
yy254:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'g':	goto yy266;
	default:	goto yy100;
	}
yy255:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'e':	goto yy267;
	default:	goto yy100;
	}
yy256:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'c':	goto yy268;
	default:	goto yy100;
	}
yy257:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case '=':	goto yy269;
	default:	goto yy100;
	}
yy258:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'c':	goto yy271;
	default:	goto yy100;
	}
yy259:
	++YYCURSOR;
	hea->yy.state = (17);
	if (YYLIMIT <= YYCURSOR) {upd;return head;}
yyFillLabel17:
	hea->yy.ch = *YYCURSOR;
	switch (hea->yy.ch) {
	case ' ':	goto yy259;
	default:	goto yy261;
	}
yy261:
	hea->yy.cond = (jwl_http_scanner_condition_head_ua);
#line 410 "jwl/jwl_http.l"
	{upd;hea->ua			=jbl_string_free(hea->ua)													;goto yyc_head_ua	;}
#line 1836 "jwl/jwl_http.c"
yy262:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'i':	goto yy272;
	default:	goto yy100;
	}
yy263:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'a':	goto yy273;
	default:	goto yy100;
	}
yy264:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'l':	goto yy274;
	default:	goto yy100;
	}
yy265:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 't':	goto yy275;
	default:	goto yy100;
	}
yy266:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'e':	goto yy276;
	default:	goto yy100;
	}
yy267:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case ':':	goto yy277;
	default:	goto yy100;
	}
yy268:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'h':	goto yy280;
	default:	goto yy100;
	}
yy269:
	++YYCURSOR;
	hea->yy.cond = (jwl_http_scanner_condition_head_range_s);
#line 449 "jwl/jwl_http.l"
	{upd;hea->range.start	=0																			;goto yyc_head_range_s;}
#line 1884 "jwl/jwl_http.c"
yy271:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'o':	goto yy281;
	default:	goto yy100;
	}
yy272:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'n':	goto yy282;
	default:	goto yy100;
	}
yy273:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'g':	goto yy283;
	default:	goto yy100;
	}
yy274:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case ':':	goto yy284;
	default:	goto yy100;
	}
yy275:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'h':	goto yy287;
	default:	goto yy100;
	}
yy276:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case ':':	goto yy288;
	default:	goto yy100;
	}
yy277:
	++YYCURSOR;
	hea->yy.state = (18);
	if (YYLIMIT <= YYCURSOR) {upd;return head;}
yyFillLabel18:
	hea->yy.ch = *YYCURSOR;
	switch (hea->yy.ch) {
	case ' ':	goto yy277;
	default:	goto yy279;
	}
yy279:
	hea->yy.cond = (jwl_http_scanner_condition_head_ct);
#line 470 "jwl/jwl_http.l"
	{upd;hea->yy.k			=jbl_string_free(hea->yy.k)													;goto yyc_head_ct	;}
#line 1935 "jwl/jwl_http.c"
yy280:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case ':':	goto yy290;
	default:	goto yy100;
	}
yy281:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'd':	goto yy293;
	default:	goto yy100;
	}
yy282:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'g':	goto yy294;
	default:	goto yy100;
	}
yy283:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'e':	goto yy295;
	default:	goto yy100;
	}
yy284:
	++YYCURSOR;
	hea->yy.state = (19);
	if (YYLIMIT <= YYCURSOR) {upd;return head;}
yyFillLabel19:
	hea->yy.ch = *YYCURSOR;
	switch (hea->yy.ch) {
	case ' ':	goto yy284;
	default:	goto yy286;
	}
yy286:
	hea->yy.cond = (jwl_http_scanner_condition_head_cache);
#line 463 "jwl/jwl_http.l"
	{upd;																								;goto yyc_head_cache;}
#line 1974 "jwl/jwl_http.c"
yy287:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case ':':	goto yy296;
	default:	goto yy100;
	}
yy288:
	++YYCURSOR;
	hea->yy.state = (20);
	if ((YYLIMIT - YYCURSOR) < 5) {upd;return head;}
yyFillLabel20:
	hea->yy.ch = *YYCURSOR;
	switch (hea->yy.ch) {
	case ' ':	goto yy288;
	case 'b':	goto yy299;
	default:	goto yy100;
	}
yy290:
	++YYCURSOR;
	hea->yy.state = (21);
	if (YYLIMIT <= YYCURSOR) {upd;return head;}
yyFillLabel21:
	hea->yy.ch = *YYCURSOR;
	switch (hea->yy.ch) {
	case ' ':	goto yy290;
	default:	goto yy292;
	}
yy292:
	hea->yy.cond = (jwl_http_scanner_condition_head_etag);
#line 420 "jwl/jwl_http.l"
	{upd;hea->etag			=jbl_string_free(hea->etag)													;goto yyc_head_etag	;}
#line 2006 "jwl/jwl_http.c"
yy293:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'i':	goto yy300;
	default:	goto yy100;
	}
yy294:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case ':':	goto yy301;
	default:	goto yy100;
	}
yy295:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case ':':	goto yy304;
	default:	goto yy100;
	}
yy296:
	++YYCURSOR;
	hea->yy.state = (22);
	if (YYLIMIT <= YYCURSOR) {upd;return head;}
yyFillLabel22:
	hea->yy.ch = *YYCURSOR;
	switch (hea->yy.ch) {
	case ' ':	goto yy296;
	default:	goto yy298;
	}
yy298:
	hea->yy.cond = (jwl_http_scanner_condition_head_cl);
#line 478 "jwl/jwl_http.l"
	{upd;hea->len			=0																			;goto yyc_head_cl	;}
#line 2039 "jwl/jwl_http.c"
yy299:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'y':	goto yy307;
	default:	goto yy100;
	}
yy300:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'n':	goto yy308;
	default:	goto yy100;
	}
yy301:
	++YYCURSOR;
	hea->yy.state = (23);
	if (YYLIMIT <= YYCURSOR) {upd;return head;}
yyFillLabel23:
	hea->yy.ch = *YYCURSOR;
	switch (hea->yy.ch) {
	case ' ':	goto yy301;
	default:	goto yy303;
	}
yy303:
	hea->yy.cond = (jwl_http_scanner_condition_head_tren);
#line 432 "jwl/jwl_http.l"
	{upd;																								;goto yyc_head_tren	;}
#line 2066 "jwl/jwl_http.c"
yy304:
	++YYCURSOR;
	hea->yy.state = (24);
	if (YYLIMIT <= YYCURSOR) {upd;return head;}
yyFillLabel24:
	hea->yy.ch = *YYCURSOR;
	switch (hea->yy.ch) {
	case ' ':	goto yy304;
	default:	goto yy306;
	}
yy306:
	hea->yy.cond = (jwl_http_scanner_condition_head_ign);
#line 502 "jwl/jwl_http.l"
	{upd;																								;goto yyc_head_ign	;}
#line 2081 "jwl/jwl_http.c"
yy307:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 't':	goto yy309;
	default:	goto yy100;
	}
yy308:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'g':	goto yy310;
	default:	goto yy100;
	}
yy309:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'e':	goto yy311;
	default:	goto yy100;
	}
yy310:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case ':':	goto yy312;
	default:	goto yy100;
	}
yy311:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 's':	goto yy315;
	default:	goto yy100;
	}
yy312:
	++YYCURSOR;
	hea->yy.state = (25);
	if (YYLIMIT <= YYCURSOR) {upd;return head;}
yyFillLabel25:
	hea->yy.ch = *YYCURSOR;
	switch (hea->yy.ch) {
	case ' ':	goto yy312;
	default:	goto yy314;
	}
yy314:
	hea->yy.cond = (jwl_http_scanner_condition_head_tren);
#line 433 "jwl/jwl_http.l"
	{upd;																								;goto yyc_head_tren	;}
#line 2126 "jwl/jwl_http.c"
yy315:
	++YYCURSOR;
	hea->yy.cond = (jwl_http_scanner_condition_head_range_s);
#line 450 "jwl/jwl_http.l"
	{upd;hea->range.start	=0																			;goto yyc_head_range_s;}
#line 2132 "jwl/jwl_http.c"
/* *********************************** */
yyc_head_host:
	hea->yy.state = (26);
	if ((YYLIMIT - YYCURSOR) < 2) {upd;return head;}
yyFillLabel26:
	hea->yy.ch = *(hea->yy.marker = YYCURSOR);
	switch (hea->yy.ch) {
	case 0x00:	goto yy320;
	case '\r':	goto yy322;
	default:	goto yy319;
	}
yy319:
#line 407 "jwl/jwl_http.l"
	{   ;hea->host			=jbl_string_add_char(hea->host,*YYCURSOR)					;++YYCURSOR;upd	;goto yyc_head_host	;}
#line 2147 "jwl/jwl_http.c"
yy320:
	++YYCURSOR;
#line 507 "jwl/jwl_http.l"
	{return head;}
#line 2152 "jwl/jwl_http.c"
yy322:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case '\n':	goto yy324;
	default:	goto yy323;
	}
yy323:
	YYCURSOR = hea->yy.marker;
	goto yy319;
yy324:
	++YYCURSOR;
	hea->yy.cond = (jwl_http_scanner_condition_head_body);
#line 408 "jwl/jwl_http.l"
	{upd;																								;goto yyc_head_body	;}
#line 2167 "jwl/jwl_http.c"
/* *********************************** */
yyc_head_ua:
	hea->yy.state = (27);
	if ((YYLIMIT - YYCURSOR) < 2) {upd;return head;}
yyFillLabel27:
	hea->yy.ch = *(hea->yy.marker = YYCURSOR);
	switch (hea->yy.ch) {
	case 0x00:	goto yy329;
	case '\r':	goto yy331;
	default:	goto yy328;
	}
yy328:
#line 411 "jwl/jwl_http.l"
	{   ;hea->ua			=jbl_string_add_char(hea->ua,*YYCURSOR)						;++YYCURSOR;upd	;goto yyc_head_ua	;}
#line 2182 "jwl/jwl_http.c"
yy329:
	++YYCURSOR;
#line 507 "jwl/jwl_http.l"
	{return head;}
#line 2187 "jwl/jwl_http.c"
yy331:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case '\n':	goto yy333;
	default:	goto yy332;
	}
yy332:
	YYCURSOR = hea->yy.marker;
	goto yy328;
yy333:
	++YYCURSOR;
	hea->yy.cond = (jwl_http_scanner_condition_head_body);
#line 412 "jwl/jwl_http.l"
	{upd;																								;goto yyc_head_body	;}
#line 2202 "jwl/jwl_http.c"
/* *********************************** */
yyc_head_refer:
	hea->yy.state = (28);
	if ((YYLIMIT - YYCURSOR) < 2) {upd;return head;}
yyFillLabel28:
	hea->yy.ch = *(hea->yy.marker = YYCURSOR);
	switch (hea->yy.ch) {
	case 0x00:	goto yy338;
	case '\r':	goto yy340;
	default:	goto yy337;
	}
yy337:
#line 415 "jwl/jwl_http.l"
	{   ;hea->referer		=jbl_string_add_char(hea->referer,*YYCURSOR)				;++YYCURSOR;upd	;goto yyc_head_refer;}
#line 2217 "jwl/jwl_http.c"
yy338:
	++YYCURSOR;
#line 507 "jwl/jwl_http.l"
	{return head;}
#line 2222 "jwl/jwl_http.c"
yy340:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case '\n':	goto yy342;
	default:	goto yy341;
	}
yy341:
	YYCURSOR = hea->yy.marker;
	goto yy337;
yy342:
	++YYCURSOR;
	hea->yy.cond = (jwl_http_scanner_condition_head_body);
#line 416 "jwl/jwl_http.l"
	{upd;																								;goto yyc_head_body	;}
#line 2237 "jwl/jwl_http.c"
/* *********************************** */
yyc_head_etag:
	hea->yy.state = (29);
	if ((YYLIMIT - YYCURSOR) < 2) {upd;return head;}
yyFillLabel29:
	hea->yy.ch = *(hea->yy.marker = YYCURSOR);
	switch (hea->yy.ch) {
	case 0x00:	goto yy347;
	case '\r':	goto yy349;
	default:	goto yy346;
	}
yy346:
#line 421 "jwl/jwl_http.l"
	{   ;hea->etag			=jbl_string_add_char(hea->etag,*YYCURSOR)					;++YYCURSOR;upd	;goto yyc_head_etag	;}
#line 2252 "jwl/jwl_http.c"
yy347:
	++YYCURSOR;
#line 507 "jwl/jwl_http.l"
	{return head;}
#line 2257 "jwl/jwl_http.c"
yy349:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case '\n':	goto yy351;
	default:	goto yy350;
	}
yy350:
	YYCURSOR = hea->yy.marker;
	goto yy346;
yy351:
	++YYCURSOR;
	hea->yy.cond = (jwl_http_scanner_condition_head_body);
#line 422 "jwl/jwl_http.l"
	{upd;																								;goto yyc_head_body	;}
#line 2272 "jwl/jwl_http.c"
/* *********************************** */
yyc_head_conn:
	hea->yy.state = (30);
	if ((YYLIMIT - YYCURSOR) < 10) {upd;return head;}
yyFillLabel30:
	hea->yy.ch = *(hea->yy.marker = YYCURSOR);
	switch (hea->yy.ch) {
	case 0x00:	goto yy356;
	case '\r':	goto yy358;
	case ',':	goto yy360;
	case 'U':	goto yy361;
	case 'c':	goto yy362;
	case 'k':	goto yy363;
	default:	goto yy355;
	}
yy355:
#line 429 "jwl/jwl_http.l"
	{   ;																				;++YYCURSOR;upd	;goto yyc_head_conn	;}
#line 2291 "jwl/jwl_http.c"
yy356:
	++YYCURSOR;
#line 507 "jwl/jwl_http.l"
	{return head;}
#line 2296 "jwl/jwl_http.c"
yy358:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case '\n':	goto yy364;
	default:	goto yy359;
	}
yy359:
	YYCURSOR = hea->yy.marker;
	goto yy355;
yy360:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case ' ':	goto yy366;
	default:	goto yy359;
	}
yy361:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'p':	goto yy368;
	default:	goto yy359;
	}
yy362:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'l':	goto yy369;
	default:	goto yy359;
	}
yy363:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'e':	goto yy370;
	default:	goto yy359;
	}
yy364:
	++YYCURSOR;
	hea->yy.cond = (jwl_http_scanner_condition_head_body);
#line 430 "jwl/jwl_http.l"
	{upd;																								;goto yyc_head_body	;}
#line 2335 "jwl/jwl_http.c"
yy366:
	++YYCURSOR;
#line 428 "jwl/jwl_http.l"
	{upd;																								;goto yyc_head_conn	;}
#line 2340 "jwl/jwl_http.c"
yy368:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'g':	goto yy371;
	default:	goto yy359;
	}
yy369:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'o':	goto yy372;
	default:	goto yy359;
	}
yy370:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'e':	goto yy373;
	default:	goto yy359;
	}
yy371:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'r':	goto yy374;
	default:	goto yy359;
	}
yy372:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 's':	goto yy375;
	default:	goto yy359;
	}
yy373:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'p':	goto yy376;
	default:	goto yy359;
	}
yy374:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'a':	goto yy377;
	default:	goto yy359;
	}
yy375:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'e':	goto yy378;
	default:	goto yy359;
	}
yy376:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case '-':	goto yy380;
	default:	goto yy359;
	}
yy377:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'd':	goto yy381;
	default:	goto yy359;
	}
yy378:
	++YYCURSOR;
#line 426 "jwl/jwl_http.l"
	{upd;hea->connection	|=JWL_HTTP_CONNECTION_CLOSE													;goto yyc_head_conn	;}
#line 2405 "jwl/jwl_http.c"
yy380:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'a':	goto yy382;
	default:	goto yy359;
	}
yy381:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'e':	goto yy383;
	default:	goto yy359;
	}
yy382:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'l':	goto yy385;
	default:	goto yy359;
	}
yy383:
	++YYCURSOR;
#line 427 "jwl/jwl_http.l"
	{upd;hea->connection	|=JWL_HTTP_CONNECTION_UPGRADE												;goto yyc_head_conn	;}
#line 2428 "jwl/jwl_http.c"
yy385:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'i':	goto yy386;
	default:	goto yy359;
	}
yy386:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'v':	goto yy387;
	default:	goto yy359;
	}
yy387:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'e':	goto yy388;
	default:	goto yy359;
	}
yy388:
	++YYCURSOR;
#line 425 "jwl/jwl_http.l"
	{upd;hea->connection	|=JWL_HTTP_CONNECTION_KEEP_ALIVE											;goto yyc_head_conn	;}
#line 2451 "jwl/jwl_http.c"
/* *********************************** */
yyc_head_tren:
	hea->yy.state = (31);
	if ((YYLIMIT - YYCURSOR) < 8) {upd;return head;}
yyFillLabel31:
	hea->yy.ch = *(hea->yy.marker = YYCURSOR);
	switch (hea->yy.ch) {
	case 0x00:	goto yy393;
	case '\r':	goto yy395;
	case ',':	goto yy397;
	case 'c':	goto yy398;
	case 'd':	goto yy399;
	case 'g':	goto yy400;
	case 'i':	goto yy401;
	default:	goto yy392;
	}
yy392:
#line 440 "jwl/jwl_http.l"
	{   ;																				;++YYCURSOR;upd	;goto yyc_head_tren	;}
#line 2471 "jwl/jwl_http.c"
yy393:
	++YYCURSOR;
#line 507 "jwl/jwl_http.l"
	{return head;}
#line 2476 "jwl/jwl_http.c"
yy395:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case '\n':	goto yy402;
	default:	goto yy396;
	}
yy396:
	YYCURSOR = hea->yy.marker;
	goto yy392;
yy397:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case ' ':	goto yy404;
	default:	goto yy396;
	}
yy398:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'h':	goto yy406;
	case 'o':	goto yy407;
	default:	goto yy396;
	}
yy399:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'e':	goto yy408;
	default:	goto yy396;
	}
yy400:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'z':	goto yy409;
	default:	goto yy396;
	}
yy401:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'd':	goto yy410;
	default:	goto yy396;
	}
yy402:
	++YYCURSOR;
	hea->yy.cond = (jwl_http_scanner_condition_head_body);
#line 441 "jwl/jwl_http.l"
	{upd;																								;goto yyc_head_body	;}
#line 2522 "jwl/jwl_http.c"
yy404:
	++YYCURSOR;
#line 439 "jwl/jwl_http.l"
	{upd;																								;goto yyc_head_tren	;}
#line 2527 "jwl/jwl_http.c"
yy406:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'u':	goto yy411;
	default:	goto yy396;
	}
yy407:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'm':	goto yy412;
	default:	goto yy396;
	}
yy408:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'f':	goto yy413;
	default:	goto yy396;
	}
yy409:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'i':	goto yy414;
	default:	goto yy396;
	}
yy410:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'e':	goto yy415;
	default:	goto yy396;
	}
yy411:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'n':	goto yy416;
	default:	goto yy396;
	}
yy412:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'p':	goto yy417;
	default:	goto yy396;
	}
yy413:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'l':	goto yy418;
	default:	goto yy396;
	}
yy414:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'p':	goto yy419;
	default:	goto yy396;
	}
yy415:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'n':	goto yy421;
	default:	goto yy396;
	}
yy416:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'k':	goto yy422;
	default:	goto yy396;
	}
yy417:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'r':	goto yy423;
	default:	goto yy396;
	}
yy418:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'a':	goto yy424;
	default:	goto yy396;
	}
yy419:
	++YYCURSOR;
#line 437 "jwl/jwl_http.l"
	{upd;hea->tren			|=JWL_HTTP_TREN_GZIP														;goto yyc_head_tren	;}
#line 2610 "jwl/jwl_http.c"
yy421:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 't':	goto yy425;
	default:	goto yy396;
	}
yy422:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'e':	goto yy426;
	default:	goto yy396;
	}
yy423:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'e':	goto yy427;
	default:	goto yy396;
	}
yy424:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 't':	goto yy428;
	default:	goto yy396;
	}
yy425:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'i':	goto yy429;
	default:	goto yy396;
	}
yy426:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'd':	goto yy430;
	default:	goto yy396;
	}
yy427:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 's':	goto yy432;
	default:	goto yy396;
	}
yy428:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'e':	goto yy433;
	default:	goto yy396;
	}
yy429:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 't':	goto yy435;
	default:	goto yy396;
	}
yy430:
	++YYCURSOR;
#line 434 "jwl/jwl_http.l"
	{upd;hea->tren			|=JWL_HTTP_TREN_CHUNKED														;goto yyc_head_tren	;}
#line 2669 "jwl/jwl_http.c"
yy432:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 's':	goto yy436;
	default:	goto yy396;
	}
yy433:
	++YYCURSOR;
#line 436 "jwl/jwl_http.l"
	{upd;hea->tren			|=JWL_HTTP_TREN_DEFLATE														;goto yyc_head_tren	;}
#line 2680 "jwl/jwl_http.c"
yy435:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'y':	goto yy438;
	default:	goto yy396;
	}
yy436:
	++YYCURSOR;
#line 435 "jwl/jwl_http.l"
	{upd;hea->tren			|=JWL_HTTP_TREN_COMPRESS													;goto yyc_head_tren	;}
#line 2691 "jwl/jwl_http.c"
yy438:
	++YYCURSOR;
#line 438 "jwl/jwl_http.l"
	{upd;hea->tren			|=JWL_HTTP_TREN_IDENTITY													;goto yyc_head_tren	;}
#line 2696 "jwl/jwl_http.c"
/* *********************************** */
yyc_head_upgrade:
	hea->yy.state = (32);
	if ((YYLIMIT - YYCURSOR) < 9) {upd;return head;}
yyFillLabel32:
	hea->yy.ch = *(hea->yy.marker = YYCURSOR);
	switch (hea->yy.ch) {
	case 0x00:	goto yy443;
	case '\r':	goto yy445;
	case 'w':	goto yy447;
	default:	goto yy442;
	}
yy442:
#line 445 "jwl/jwl_http.l"
	{   ;																				;++YYCURSOR;upd	;goto yyc_head_upgrade;}
#line 2712 "jwl/jwl_http.c"
yy443:
	++YYCURSOR;
#line 507 "jwl/jwl_http.l"
	{return head;}
#line 2717 "jwl/jwl_http.c"
yy445:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case '\n':	goto yy448;
	default:	goto yy446;
	}
yy446:
	YYCURSOR = hea->yy.marker;
	goto yy442;
yy447:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'e':	goto yy450;
	default:	goto yy446;
	}
yy448:
	++YYCURSOR;
	hea->yy.cond = (jwl_http_scanner_condition_head_body);
#line 446 "jwl/jwl_http.l"
	{upd;																								;goto yyc_head_body	;}
#line 2738 "jwl/jwl_http.c"
yy450:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'b':	goto yy451;
	default:	goto yy446;
	}
yy451:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 's':	goto yy452;
	default:	goto yy446;
	}
yy452:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'o':	goto yy453;
	default:	goto yy446;
	}
yy453:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'c':	goto yy454;
	default:	goto yy446;
	}
yy454:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'k':	goto yy455;
	default:	goto yy446;
	}
yy455:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'e':	goto yy456;
	default:	goto yy446;
	}
yy456:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 't':	goto yy457;
	default:	goto yy446;
	}
yy457:
	++YYCURSOR;
#line 444 "jwl/jwl_http.l"
	{upd;hea->upgrade		=JWL_HTTP_UPGRADE_WEBSOCKET													;goto yyc_head_upgrade;}
#line 2785 "jwl/jwl_http.c"
/* *********************************** */
yyc_head_range_s:
	hea->yy.state = (33);
	if ((YYLIMIT - YYCURSOR) < 2) {upd;return head;}
yyFillLabel33:
	hea->yy.ch = *(hea->yy.marker = YYCURSOR);
	switch (hea->yy.ch) {
	case 0x00:	goto yy462;
	case '\r':	goto yy464;
	case '-':	goto yy466;
	case '0':
	case '1':
	case '2':
	case '3':
	case '4':
	case '5':
	case '6':
	case '7':
	case '8':
	case '9':	goto yy468;
	default:	goto yy461;
	}
yy461:
#line 456 "jwl/jwl_http.l"
	{   ;																				;++YYCURSOR;upd	;goto yyc_head_range_s;}
#line 2811 "jwl/jwl_http.c"
yy462:
	++YYCURSOR;
#line 507 "jwl/jwl_http.l"
	{return head;}
#line 2816 "jwl/jwl_http.c"
yy464:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case '\n':	goto yy470;
	default:	goto yy465;
	}
yy465:
	YYCURSOR = hea->yy.marker;
	goto yy461;
yy466:
	++YYCURSOR;
	hea->yy.cond = (jwl_http_scanner_condition_head_range_e);
#line 451 "jwl/jwl_http.l"
	{upd;hea->range.end		=0																			;goto yyc_head_range_e;}
#line 2831 "jwl/jwl_http.c"
yy468:
	++YYCURSOR;
#line 453 "jwl/jwl_http.l"
	{upd;hea->range.start	=(hea->range.start<<3)+(hea->range.start<<1)+*(YYCURSOR-1)-'0'				;goto yyc_head_range_s;}
#line 2836 "jwl/jwl_http.c"
yy470:
	++YYCURSOR;
	hea->yy.cond = (jwl_http_scanner_condition_head_body);
#line 459 "jwl/jwl_http.l"
	{upd;																								;goto yyc_head_body	;}
#line 2842 "jwl/jwl_http.c"
/* *********************************** */
yyc_head_range_e:
	hea->yy.state = (34);
	if ((YYLIMIT - YYCURSOR) < 2) {upd;return head;}
yyFillLabel34:
	hea->yy.ch = *(hea->yy.marker = YYCURSOR);
	switch (hea->yy.ch) {
	case 0x00:	goto yy475;
	case '\r':	goto yy477;
	case '/':	goto yy479;
	case '0':
	case '1':
	case '2':
	case '3':
	case '4':
	case '5':
	case '6':
	case '7':
	case '8':
	case '9':	goto yy481;
	default:	goto yy474;
	}
yy474:
#line 457 "jwl/jwl_http.l"
	{   ;																				;++YYCURSOR;upd	;goto yyc_head_range_e;}
#line 2868 "jwl/jwl_http.c"
yy475:
	++YYCURSOR;
#line 507 "jwl/jwl_http.l"
	{return head;}
#line 2873 "jwl/jwl_http.c"
yy477:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case '\n':	goto yy483;
	default:	goto yy478;
	}
yy478:
	YYCURSOR = hea->yy.marker;
	goto yy474;
yy479:
	++YYCURSOR;
#line 452 "jwl/jwl_http.l"
	{upd;hea->total_len		=0																			;goto yyc_head_range_t;}
#line 2887 "jwl/jwl_http.c"
yy481:
	++YYCURSOR;
#line 454 "jwl/jwl_http.l"
	{upd;hea->range.end		=(hea->range.end<<3)+(hea->range.end<<1)+*(YYCURSOR-1)-'0'					;goto yyc_head_range_e;}
#line 2892 "jwl/jwl_http.c"
yy483:
	++YYCURSOR;
	hea->yy.cond = (jwl_http_scanner_condition_head_body);
#line 460 "jwl/jwl_http.l"
	{upd;hea->range.end		=(hea->range.end)?(hea->range.end+1):0										;goto yyc_head_body	;}
#line 2898 "jwl/jwl_http.c"
/* *********************************** */
yyc_head_range_t:
	hea->yy.state = (35);
	if ((YYLIMIT - YYCURSOR) < 2) {upd;return head;}
yyFillLabel35:
	hea->yy.ch = *(hea->yy.marker = YYCURSOR);
	switch (hea->yy.ch) {
	case 0x00:	goto yy488;
	case '\r':	goto yy490;
	case '0':
	case '1':
	case '2':
	case '3':
	case '4':
	case '5':
	case '6':
	case '7':
	case '8':
	case '9':	goto yy492;
	default:	goto yy487;
	}
yy487:
#line 458 "jwl/jwl_http.l"
	{   ;																				;++YYCURSOR;upd	;goto yyc_head_range_t;}
#line 2923 "jwl/jwl_http.c"
yy488:
	++YYCURSOR;
#line 507 "jwl/jwl_http.l"
	{return head;}
#line 2928 "jwl/jwl_http.c"
yy490:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case '\n':	goto yy494;
	default:	goto yy491;
	}
yy491:
	YYCURSOR = hea->yy.marker;
	goto yy487;
yy492:
	++YYCURSOR;
#line 455 "jwl/jwl_http.l"
	{upd;hea->total_len		=(hea->total_len<<3)+(hea->total_len<<1)+*(YYCURSOR-1)-'0'					;goto yyc_head_range_t;}
#line 2942 "jwl/jwl_http.c"
yy494:
	++YYCURSOR;
	hea->yy.cond = (jwl_http_scanner_condition_head_body);
#line 461 "jwl/jwl_http.l"
	{upd;hea->range.end		=(hea->range.end)?(hea->range.end+1):0										;goto yyc_head_body	;}
#line 2948 "jwl/jwl_http.c"
/* *********************************** */
yyc_head_cache:
	hea->yy.state = (36);
	if ((YYLIMIT - YYCURSOR) < 8) {upd;return head;}
yyFillLabel36:
	hea->yy.ch = *(hea->yy.marker = YYCURSOR);
	switch (hea->yy.ch) {
	case 0x00:	goto yy499;
	case '\r':	goto yy501;
	case 'n':	goto yy503;
	default:	goto yy498;
	}
yy498:
#line 466 "jwl/jwl_http.l"
	{   ;																				;++YYCURSOR;upd	;goto yyc_head_cache;}
#line 2964 "jwl/jwl_http.c"
yy499:
	++YYCURSOR;
#line 507 "jwl/jwl_http.l"
	{return head;}
#line 2969 "jwl/jwl_http.c"
yy501:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case '\n':	goto yy504;
	default:	goto yy502;
	}
yy502:
	YYCURSOR = hea->yy.marker;
	goto yy498;
yy503:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'o':	goto yy506;
	default:	goto yy502;
	}
yy504:
	++YYCURSOR;
	hea->yy.cond = (jwl_http_scanner_condition_head_body);
#line 467 "jwl/jwl_http.l"
	{upd;																								;goto yyc_head_body	;}
#line 2990 "jwl/jwl_http.c"
yy506:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case '-':	goto yy507;
	default:	goto yy502;
	}
yy507:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'c':	goto yy508;
	default:	goto yy502;
	}
yy508:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'a':	goto yy509;
	default:	goto yy502;
	}
yy509:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'c':	goto yy510;
	default:	goto yy502;
	}
yy510:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'h':	goto yy511;
	default:	goto yy502;
	}
yy511:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'e':	goto yy512;
	default:	goto yy502;
	}
yy512:
	++YYCURSOR;
#line 465 "jwl/jwl_http.l"
	{upd;hea->cache			=JWL_HTTP_CACHE_NO															;goto yyc_head_cache;}
#line 3031 "jwl/jwl_http.c"
/* *********************************** */
yyc_head_ct:
	hea->yy.state = (37);
	if ((YYLIMIT - YYCURSOR) < 2) {upd;return head;}
yyFillLabel37:
	hea->yy.ch = *(hea->yy.marker = YYCURSOR);
	switch (hea->yy.ch) {
	case 0x00:	goto yy517;
	case '\r':	goto yy519;
	case ';':	goto yy521;
	default:	goto yy516;
	}
yy516:
#line 471 "jwl/jwl_http.l"
	{   ;hea->yy.k			=jbl_string_add_char(hea->yy.k,*YYCURSOR)					;++YYCURSOR;upd	;goto yyc_head_ct	;}
#line 3047 "jwl/jwl_http.c"
yy517:
	++YYCURSOR;
#line 507 "jwl/jwl_http.l"
	{return head;}
#line 3052 "jwl/jwl_http.c"
yy519:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case '\n':	goto yy523;
	default:	goto yy520;
	}
yy520:
	YYCURSOR = hea->yy.marker;
	goto yy516;
yy521:
	++YYCURSOR;
	hea->yy.state = (38);
	if ((YYLIMIT - YYCURSOR) < 8) {upd;return head;}
yyFillLabel38:
	hea->yy.ch = *YYCURSOR;
	switch (hea->yy.ch) {
	case ' ':	goto yy521;
	case 'c':	goto yy525;
	default:	goto yy520;
	}
yy523:
	++YYCURSOR;
	hea->yy.cond = (jwl_http_scanner_condition_head_body);
#line 473 "jwl/jwl_http.l"
	{upd;hea->content_type	=jbl_file_get_ctid_by_ct(hea->yy.k);hea->yy.k=jbl_string_free(hea->yy.k)	;goto yyc_head_body	;}
#line 3078 "jwl/jwl_http.c"
yy525:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'h':	goto yy526;
	default:	goto yy520;
	}
yy526:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'a':	goto yy527;
	default:	goto yy520;
	}
yy527:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'r':	goto yy528;
	default:	goto yy520;
	}
yy528:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 's':	goto yy529;
	default:	goto yy520;
	}
yy529:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'e':	goto yy530;
	default:	goto yy520;
	}
yy530:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 't':	goto yy531;
	default:	goto yy520;
	}
yy531:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case '=':	goto yy532;
	default:	goto yy520;
	}
yy532:
	++YYCURSOR;
	hea->yy.cond = (jwl_http_scanner_condition_head_cs);
#line 472 "jwl/jwl_http.l"
	{upd;hea->content_type	=jbl_file_get_ctid_by_ct(hea->yy.k);hea->yy.k=jbl_string_free(hea->yy.k)	;goto yyc_head_cs	;}
#line 3126 "jwl/jwl_http.c"
/* *********************************** */
yyc_head_cs:
	hea->yy.state = (39);
	if ((YYLIMIT - YYCURSOR) < 5) {upd;return head;}
yyFillLabel39:
	hea->yy.ch = *(hea->yy.marker = YYCURSOR);
	switch (hea->yy.ch) {
	case 0x00:	goto yy537;
	case '\r':	goto yy539;
	case 'U':	goto yy541;
	default:	goto yy536;
	}
yy536:
#line 475 "jwl/jwl_http.l"
	{   ;																				;++YYCURSOR;upd	;goto yyc_head_cs	;}
#line 3142 "jwl/jwl_http.c"
yy537:
	++YYCURSOR;
#line 507 "jwl/jwl_http.l"
	{return head;}
#line 3147 "jwl/jwl_http.c"
yy539:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case '\n':	goto yy542;
	default:	goto yy540;
	}
yy540:
	YYCURSOR = hea->yy.marker;
	goto yy536;
yy541:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'T':	goto yy544;
	default:	goto yy540;
	}
yy542:
	++YYCURSOR;
	hea->yy.cond = (jwl_http_scanner_condition_head_body);
#line 476 "jwl/jwl_http.l"
	{upd;																								;goto yyc_head_body	;}
#line 3168 "jwl/jwl_http.c"
yy544:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case 'F':	goto yy545;
	default:	goto yy540;
	}
yy545:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case '-':	goto yy546;
	default:	goto yy540;
	}
yy546:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case '8':	goto yy547;
	default:	goto yy540;
	}
yy547:
	++YYCURSOR;
#line 474 "jwl/jwl_http.l"
	{upd;hea->charset		=JWL_HTTP_CHARSET_UTF8														;goto yyc_head_cs	;}
#line 3191 "jwl/jwl_http.c"
/* *********************************** */
yyc_head_cl:
	hea->yy.state = (40);
	if ((YYLIMIT - YYCURSOR) < 2) {upd;return head;}
yyFillLabel40:
	hea->yy.ch = *(hea->yy.marker = YYCURSOR);
	switch (hea->yy.ch) {
	case 0x00:	goto yy552;
	case '\r':	goto yy554;
	case '0':
	case '1':
	case '2':
	case '3':
	case '4':
	case '5':
	case '6':
	case '7':
	case '8':
	case '9':	goto yy556;
	default:	goto yy551;
	}
yy551:
#line 480 "jwl/jwl_http.l"
	{   ;																				;++YYCURSOR;upd	;goto yyc_head_cl	;}
#line 3216 "jwl/jwl_http.c"
yy552:
	++YYCURSOR;
#line 507 "jwl/jwl_http.l"
	{return head;}
#line 3221 "jwl/jwl_http.c"
yy554:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case '\n':	goto yy558;
	default:	goto yy555;
	}
yy555:
	YYCURSOR = hea->yy.marker;
	goto yy551;
yy556:
	++YYCURSOR;
#line 479 "jwl/jwl_http.l"
	{upd;hea->len			=(hea->len<<3)+(hea->len<<1)+*(YYCURSOR-1)-'0'								;goto yyc_head_cl	;}
#line 3235 "jwl/jwl_http.c"
yy558:
	++YYCURSOR;
	hea->yy.cond = (jwl_http_scanner_condition_head_body);
#line 481 "jwl/jwl_http.l"
	{upd;																								;goto yyc_head_body	;}
#line 3241 "jwl/jwl_http.c"
/* *********************************** */
yyc_head_cookie:
	hea->yy.state = (41);
	if ((YYLIMIT - YYCURSOR) < 2) {upd;return head;}
yyFillLabel41:
	hea->yy.ch = *(hea->yy.marker = YYCURSOR);
	switch (hea->yy.ch) {
	case 0x00:	goto yy563;
	case '\r':	goto yy565;
	case '=':	goto yy567;
	default:	goto yy562;
	}
yy562:
#line 485 "jwl/jwl_http.l"
	{   ;hea->yy.k			=jbl_string_add_char(hea->yy.k,*YYCURSOR)					;++YYCURSOR;upd	;goto yyc_head_cookie;}
#line 3257 "jwl/jwl_http.c"
yy563:
	++YYCURSOR;
#line 507 "jwl/jwl_http.l"
	{return head;}
#line 3262 "jwl/jwl_http.c"
yy565:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case '\n':	goto yy569;
	default:	goto yy566;
	}
yy566:
	YYCURSOR = hea->yy.marker;
	goto yy562;
yy567:
	++YYCURSOR;
	hea->yy.cond = (jwl_http_scanner_condition_head_cookiev);
#line 486 "jwl/jwl_http.l"
	{upd;hea->yy.v			=jbl_var_free(hea->yy.v);hea->yy.v=jbl_string_new()						;goto yyc_head_cookiev;}
#line 3277 "jwl/jwl_http.c"
yy569:
	++YYCURSOR;
	hea->yy.cond = (jwl_http_scanner_condition_head_body);
#line 487 "jwl/jwl_http.l"
	{upd;hea->yy.k			=jbl_string_free(hea->yy.k)													;goto yyc_head_body	;}
#line 3283 "jwl/jwl_http.c"
/* *********************************** */
yyc_head_cookiev:
	hea->yy.state = (42);
	if ((YYLIMIT - YYCURSOR) < 2) {upd;return head;}
yyFillLabel42:
	hea->yy.ch = *(hea->yy.marker = YYCURSOR);
	switch (hea->yy.ch) {
	case 0x00:	goto yy574;
	case '\r':	goto yy576;
	case ';':	goto yy578;
	default:	goto yy573;
	}
yy573:
#line 488 "jwl/jwl_http.l"
	{   ;hea->yy.v			=jbl_string_add_char(hea->yy.v,*YYCURSOR);++YYCURSOR;upd;goto yyc_head_cookiev;}
#line 3299 "jwl/jwl_http.c"
yy574:
	++YYCURSOR;
#line 507 "jwl/jwl_http.l"
	{return head;}
#line 3304 "jwl/jwl_http.c"
yy576:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case '\n':	goto yy579;
	default:	goto yy577;
	}
yy577:
	YYCURSOR = hea->yy.marker;
	goto yy573;
yy578:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case ' ':	goto yy581;
	default:	goto yy577;
	}
yy579:
	++YYCURSOR;
	hea->yy.cond = (jwl_http_scanner_condition_head_body);
#line 490 "jwl/jwl_http.l"
	{upd;hea->cookie		=jbl_ht_insert(hea->cookie,hea->yy.k,hea->yy.v);hea->yy.k=jbl_string_free(hea->yy.k);hea->yy.v=jbl_var_free(hea->yy.v)		;goto yyc_head_body		;}
#line 3325 "jwl/jwl_http.c"
yy581:
	++YYCURSOR;
	hea->yy.cond = (jwl_http_scanner_condition_head_cookie);
#line 489 "jwl/jwl_http.l"
	{upd;hea->cookie		=jbl_ht_insert(hea->cookie,hea->yy.k,hea->yy.v);hea->yy.k=jbl_string_free(hea->yy.k);hea->yy.v=jbl_var_free(hea->yy.v)		;goto yyc_head_cookie	;}
#line 3331 "jwl/jwl_http.c"
/* *********************************** */
yyc_special_key:
	hea->yy.state = (43);
	if ((YYLIMIT - YYCURSOR) < 2) {upd;return head;}
yyFillLabel43:
	hea->yy.ch = *(hea->yy.marker = YYCURSOR);
	switch (hea->yy.ch) {
	case 0x00:	goto yy586;
	case '\r':	goto yy588;
	case ':':	goto yy590;
	default:	goto yy585;
	}
yy585:
#line 494 "jwl/jwl_http.l"
	{   ;hea->yy.k			=jbl_string_add_char(hea->yy.k,*YYCURSOR)					;++YYCURSOR;upd	;goto yyc_special_key;}
#line 3347 "jwl/jwl_http.c"
yy586:
	++YYCURSOR;
#line 507 "jwl/jwl_http.l"
	{return head;}
#line 3352 "jwl/jwl_http.c"
yy588:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case '\n':	goto yy593;
	default:	goto yy589;
	}
yy589:
	YYCURSOR = hea->yy.marker;
	goto yy585;
yy590:
	++YYCURSOR;
	hea->yy.state = (44);
	if (YYLIMIT <= YYCURSOR) {upd;return head;}
yyFillLabel44:
	hea->yy.ch = *YYCURSOR;
	switch (hea->yy.ch) {
	case ' ':	goto yy590;
	default:	goto yy592;
	}
yy592:
	hea->yy.cond = (jwl_http_scanner_condition_special_var);
#line 496 "jwl/jwl_http.l"
	{upd;hea->yy.v			=jbl_var_free(hea->yy.v);hea->yy.v=jbl_string_new()							;goto yyc_special_var;}
#line 3376 "jwl/jwl_http.c"
yy593:
	++YYCURSOR;
	hea->yy.cond = (jwl_http_scanner_condition_head_body);
#line 495 "jwl/jwl_http.l"
	{upd;hea->yy.k			=jbl_string_free(hea->yy.k);hea->yy.v=jbl_var_free(hea->yy.v)				;goto yyc_head_body	;}
#line 3382 "jwl/jwl_http.c"
/* *********************************** */
yyc_special_var:
	hea->yy.state = (45);
	if ((YYLIMIT - YYCURSOR) < 2) {upd;return head;}
yyFillLabel45:
	hea->yy.ch = *(hea->yy.marker = YYCURSOR);
	switch (hea->yy.ch) {
	case 0x00:	goto yy598;
	case '\r':	goto yy600;
	default:	goto yy597;
	}
yy597:
#line 497 "jwl/jwl_http.l"
	{   ;hea->yy.v			=jbl_string_add_char(hea->yy.v,*YYCURSOR);++YYCURSOR;upd;goto yyc_special_var;}
#line 3397 "jwl/jwl_http.c"
yy598:
	++YYCURSOR;
#line 507 "jwl/jwl_http.l"
	{return head;}
#line 3402 "jwl/jwl_http.c"
yy600:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case '\n':	goto yy602;
	default:	goto yy601;
	}
yy601:
	YYCURSOR = hea->yy.marker;
	goto yy597;
yy602:
	++YYCURSOR;
	hea->yy.cond = (jwl_http_scanner_condition_head_body);
#line 498 "jwl/jwl_http.l"
	{upd;hea->v				=jbl_ht_insert(hea->v,hea->yy.k,hea->yy.v);hea->yy.k=jbl_string_free(hea->yy.k);hea->yy.v=jbl_var_free(hea->yy.v)			;goto yyc_head_body		;}
#line 3417 "jwl/jwl_http.c"
/* *********************************** */
yyc_head_ign:
	hea->yy.state = (46);
	if ((YYLIMIT - YYCURSOR) < 2) {upd;return head;}
yyFillLabel46:
	hea->yy.ch = *(hea->yy.marker = YYCURSOR);
	switch (hea->yy.ch) {
	case 0x00:	goto yy607;
	case '\r':	goto yy609;
	default:	goto yy606;
	}
yy606:
#line 503 "jwl/jwl_http.l"
	{   ;																				;++YYCURSOR;upd	;goto yyc_head_ign	;}
#line 3432 "jwl/jwl_http.c"
yy607:
	++YYCURSOR;
#line 507 "jwl/jwl_http.l"
	{return head;}
#line 3437 "jwl/jwl_http.c"
yy609:
	hea->yy.ch = *++YYCURSOR;
	switch (hea->yy.ch) {
	case '\n':	goto yy611;
	default:	goto yy610;
	}
yy610:
	YYCURSOR = hea->yy.marker;
	goto yy606;
yy611:
	++YYCURSOR;
	hea->yy.cond = (jwl_http_scanner_condition_head_body);
#line 504 "jwl/jwl_http.l"
	{upd;																								;goto yyc_head_body	;}
#line 3452 "jwl/jwl_http.c"
#line 509 "jwl/jwl_http.l"

	#undef YYCTYPE	


	return head;
}
jwl_http_head* jwl_http_head_decode(jbl_string *buf,jbl_string_size_type *start)
{
	if(!buf)return NULL;
	buf=jbl_refer_pull(buf);
	if(!buf->len)return NULL;
	jbl_string_set_tail(buf);
	return __jwl_http_head_decode(jwl_http_head_new(),buf->s,buf->s+buf->len,start);
}

#if JBL_STREAM_ENABLE==1
jbl_stream *jwl_http_encode_stream_new(jwl_http_head* head)
{
	if(!head)jbl_exception("NULL POINTER");
	return jbl_stream_new(&jwl_http_encode_stream_operaters,head,JWL_HTTP_STREAM_BUF_LENGTH,NULL,2);
}
jbl_stream *jwl_http_decode_stream_new(jwl_http_head* head)
{
	if(!head)jbl_exception("NULL POINTER");
	return jbl_stream_new(&jwl_http_decode_stream_operaters,head,JWL_HTTP_STREAM_BUF_LENGTH+1,NULL,2);
}
static void __jwl_http_encode_stream_operater(jbl_stream* this,jbl_uint8 flags)
{
	if(!this)jbl_exception("NULL POINTER");	
	this=jbl_refer_pull(this);
	jbl_stream* nxt=jbl_refer_pull(this->nxt);
	jwl_http_head *head=jbl_refer_pull((jwl_http_head*)this->data);
	if(nxt&&((flags&jbl_stream_force)||(this->en>JWL_HTTP_STREAM_BUF_LENGTH>>1))&&(!this->stop))
	{
		if(!this->extra[0].c8[0])
			jwl_http_head_encode(head,nxt),this->extra[0].c8[0]=1;
		jbl_stream_buf_size_type i=0;
		for(;i<this->en;)
		{
			jbl_stream_buf_size_type len=jbl_min(this->en-i,nxt->size-nxt->en-(head->tren&JWL_HTTP_TREN_CHUNKED?12:0));
			if(head->tren&JWL_HTTP_TREN_CHUNKED)jbl_stream_push_hex(nxt,len),jbl_stream_push_char(nxt,'\r'),jbl_stream_push_char(nxt,'\n');
			jbl_memory_copy(nxt->buf+nxt->en,this->buf+i,len);
			i+=len;
			nxt->en+=len;
			this->extra[1].u+=len;
			if(head->tren&JWL_HTTP_TREN_CHUNKED)jbl_stream_push_char(nxt,'\r'),jbl_stream_push_char(nxt,'\n');
			if((!(head->tren&JWL_HTTP_TREN_CHUNKED))&&(this->extra[1].u==head->len))goto pushf;
			jbl_stream_do(nxt,0);if(1==(this->stop=nxt->stop))goto backup;
		}
		if((!(head->tren&JWL_HTTP_TREN_CHUNKED))&&(this->extra[1].u==head->len))goto pushf;
		if((head->tren&JWL_HTTP_TREN_CHUNKED)&&(flags&jbl_stream_force))
		{
			jbl_stream_push_chars(nxt,UC"0\r\n\r\n");
pushf:;			
			jbl_stream_do(nxt,0);
			this->stop=1;
			this->extra[0].c8[0]=0,this->extra[1].u=0;
			goto backup;
		}
backup:;
		jbl_memory_copy(this->buf,this->buf+i,this->en-=i);
	}
}

static void __jwl_http_decode_stream_usf(jbl_stream* this){this->size=JWL_HTTP_STREAM_BUF_LENGTH;}
static void __jwl_http_decode_stream_operater(jbl_stream* this,jbl_uint8 flags)
{
	if(!this)jbl_exception("NULL POINTER");	
	this=jbl_refer_pull(this);
	jbl_stream* nxt=jbl_refer_pull(this->nxt);
	jbl_string_size_type i=0;
	jwl_http_head *head=NULL;
	if((!this->extra[0].c8[0])&&(!this->stop))//
	{
		this->buf[this->en]=0;
		this->data=__jwl_http_head_decode((jwl_http_head*)this->data,this->buf,this->buf+this->size,&i);
		head=jbl_refer_pull((jwl_http_head*)this->data);
		if(head->yy.cond!=(jbl_uint8)-1)
			goto backup;
		this->extra[0].c8[0]=1;
		this->extra[0].c8[1]=0;
		if(head->tren&JWL_HTTP_TREN_CHUNKED)head->len=0;
		else if(head->len==0)this->stop=1,this->extra[0].c8[0]=0,this->en=0;
	}
	else
		head=jbl_refer_pull((jwl_http_head*)this->data);
	if(nxt&&(!this->stop))
	{
start:;
		if((i<this->en)&&(!this->extra[1].u))//
		{
			if(head->tren&JWL_HTTP_TREN_CHUNKED)//chunk
			{
				if((i+2>=this->en))goto backup;
				if(this->extra[0].c8[1]){if(this->buf[i]!='\r'){jbl_exception("ERROR");}++i;}
				if(this->extra[0].c8[1]){if(this->buf[i]!='\n'){jbl_exception("ERROR");}++i;}
				if((i+3>=this->en))goto backup;
				jbl_string *s1=jbl_string_add_const_length(NULL,this->buf,this->en);
				this->extra[1].u=jbl_string_get_hex_start(s1,&i);
				s1=jbl_string_free(s1);
//				puint(this->extra[1].u);pn();pf();
				if(this->buf[i]!='\r'){jbl_exception("ERROR");}++i;
				if(this->buf[i]!='\n'){jbl_exception("ERROR");}++i;
				head->len+=this->extra[1].u;
				if(!this->extra[1].u)//
				{
					this->stop=1;
					jbl_stream_do(nxt,jbl_stream_force);
					this->extra[0].c8[0]=0;
					goto backup;
				}
			}
			else
				this->extra[1].u=head->len;
		}
		for(;i<this->en;)
		{
			jbl_stream_buf_size_type len=jbl_min(this->en-i,nxt->size-nxt->en);
			if((head->tren&JWL_HTTP_TREN_CHUNKED))jbl_min_update(len,this->extra[1].u);
			jbl_memory_copy(nxt->buf+nxt->en,this->buf+i,len);
			i+=len;
			nxt->en+=len;
			this->extra[1].u-=len;
			jbl_stream_do(nxt,0);if(1==(this->stop=nxt->stop))goto backup;
			if((!this->extra[1].u))//
			{
				if((head->tren&JWL_HTTP_TREN_CHUNKED))
				{
					this->extra[0].c8[1]=1;
					jbl_memory_copy(this->buf,this->buf+i,this->en-=i);
					i=0;
					goto start;
				}
				else
				{
					jbl_stream_do(nxt,jbl_stream_force);
					this->stop=1;
					this->extra[0].c8[0]=0;
					goto backup;
				}
			}
		}
backup:;
		jbl_memory_copy(this->buf,this->buf+i,this->en-=i);
	}
	else this->stop=1;
}
jbl_stream_operators_new(jwl_http_decode_stream_operaters,__jwl_http_decode_stream_operater,jwl_http_head_free,__jwl_http_decode_stream_usf);
jbl_stream_operators_new(jwl_http_encode_stream_operaters,__jwl_http_encode_stream_operater,jwl_http_head_free,NULL);



jwl_http_head* jwl_http_head_view_put(jwl_http_head* this,jbl_stream *out,jbl_uint8 format,jbl_uint32 tabs,jbl_uint32 line,unsigned char * varname,unsigned char * func,unsigned char * file)
{
	jwl_http_head* thi;if(jbl_stream_view_put_format(thi=jbl_refer_pull(this),out,format,tabs,UC"jwl_http_head",line,varname,func,file)){jbl_stream_push_char(out,'\n');return this;}
	jbl_stream_push_char(out,'\n');
	++tabs;
	char * type			[]={"response","request"};
	char * charset		[]={"","UTF-8"};
	char * method		[]={"","get","post"};
	char * protocol		[]={"","HTTP/1.1"};
	char * connection	[]={"","keep alive","close","upgrade"};
	char * cache		[]={"","no","max age,"};
	char * upgrade		[]={"","websocket"};
	char * tren			[]={"","chunked","compress","deflate","gzip","identity"};
	for(jbl_int32 j=0;j<tabs;jbl_stream_push_char(out,'\t'),++j);	jbl_stream_push_chars(out,UC"type         :");jbl_stream_push_chars(out,UC type			[jwl_http_head_is_request(this)?1:0])	;jbl_stream_push_char(out,'\n');
	for(jbl_int32 j=0;j<tabs;jbl_stream_push_char(out,'\t'),++j);	jbl_stream_push_chars(out,UC"method       :");jbl_stream_push_chars(out,UC method		[thi->method])						;jbl_stream_push_char(out,'\n');	
	for(jbl_int32 j=0;j<tabs;jbl_stream_push_char(out,'\t'),++j);	jbl_stream_push_chars(out,UC"status       :");jbl_stream_push_uint(out,thi->status)											;jbl_stream_push_char(out,'\n');
	
	for(jbl_int32 j=0;j<tabs;jbl_stream_push_char(out,'\t'),++j);	jbl_stream_push_chars(out,UC"length       :");jbl_stream_push_uint(out,thi->len)											;jbl_stream_push_char(out,'\n');
	for(jbl_int32 j=0;j<tabs;jbl_stream_push_char(out,'\t'),++j);	jbl_stream_push_chars(out,UC"total_length :");jbl_stream_push_uint(out,thi->total_len)										;jbl_stream_push_char(out,'\n');
	for(jbl_int32 j=0;j<tabs;jbl_stream_push_char(out,'\t'),++j);	jbl_stream_push_chars(out,UC"protocol     :");jbl_stream_push_chars(out,UC protocol		[thi->protocol])					;jbl_stream_push_char(out,'\n');	
	for(jbl_int32 j=0;j<tabs;jbl_stream_push_char(out,'\t'),++j);	jbl_stream_push_chars(out,UC"charset      :");jbl_stream_push_chars(out,UC charset		[thi->charset])						;jbl_stream_push_char(out,'\n');
	for(jbl_int32 j=0;j<tabs;jbl_stream_push_char(out,'\t'),++j);	jbl_stream_push_chars(out,UC"upgrade      :");jbl_stream_push_chars(out,UC upgrade		[thi->upgrade])						;jbl_stream_push_char(out,'\n');	
	for(jbl_int32 j=0;j<tabs;jbl_stream_push_char(out,'\t'),++j);	jbl_stream_push_chars(out,UC"cache        :");jbl_stream_push_chars(out,UC cache		[thi->cache])						;if(thi->cache==JWL_HTTP_CACHE_MAX_AGE){jbl_stream_push_uint(out,thi->cache_max_age);}	;jbl_stream_push_char(out,'\n');	
	for(jbl_int32 j=0;j<tabs;jbl_stream_push_char(out,'\t'),++j);	jbl_stream_push_chars(out,UC"range        :");jbl_stream_push_uint(out,thi->range.start)									;jbl_stream_push_char(out,'-' );	jbl_stream_push_uint(out,thi->range.end)			;jbl_stream_push_char(out,'\n');	
	for(jbl_int32 j=0;j<tabs;jbl_stream_push_char(out,'\t'),++j);	jbl_stream_push_chars(out,UC"etag         :");jbl_stream_push_string(out,thi->etag)											;jbl_stream_push_char(out,'\n');
	for(jbl_int32 j=0;j<tabs;jbl_stream_push_char(out,'\t'),++j);	jbl_stream_push_chars(out,UC"host         :");jbl_stream_push_string(out,thi->host)											;jbl_stream_push_char(out,'\n');	
	for(jbl_int32 j=0;j<tabs;jbl_stream_push_char(out,'\t'),++j);	jbl_stream_push_chars(out,UC"content type :");jbl_stream_push_chars(out,jbl_file_get_ct_chars_by_ctid(thi->content_type))	;jbl_stream_push_char(out,'\n');
	for(jbl_int32 j=0;j<tabs;jbl_stream_push_char(out,'\t'),++j);	jbl_stream_push_chars(out,UC"filename     :");jbl_stream_push_string(out,thi->filename)										;jbl_stream_push_char(out,'\n');
	for(jbl_int32 j=0;j<tabs;jbl_stream_push_char(out,'\t'),++j);	jbl_stream_push_chars(out,UC"user agent   :");jbl_stream_push_string(out,thi->ua)											;jbl_stream_push_char(out,'\n');	
	for(jbl_int32 j=0;j<tabs;jbl_stream_push_char(out,'\t'),++j);	jbl_stream_push_chars(out,UC"referer      :");jbl_stream_push_string(out,thi->referer)										;jbl_stream_push_char(out,'\n');
	for(jbl_int32 j=0;j<tabs;jbl_stream_push_char(out,'\t'),++j);	jbl_stream_push_chars(out,UC"url          :");jbl_stream_push_string(out,thi->url)											;jbl_stream_push_char(out,'\n');
	for(jbl_int32 j=0;j<tabs;jbl_stream_push_char(out,'\t'),++j);	jbl_stream_push_chars(out,UC"connection   :");
	if(!thi->connection)
		jbl_stream_push_chars(out,UC connection	[0]);
	else 
	{
		if(thi->connection&JWL_HTTP_CONNECTION_KEEP_ALIVE	)jbl_stream_push_chars(out,UC connection[1]),jbl_stream_push_char(out,',');
		if(thi->connection&JWL_HTTP_CONNECTION_CLOSE		)jbl_stream_push_chars(out,UC connection[2]),jbl_stream_push_char(out,',');
		if(thi->connection&JWL_HTTP_CONNECTION_UPGRADE		)jbl_stream_push_chars(out,UC connection[3]),jbl_stream_push_char(out,',');
	}
	jbl_stream_push_char(out,'\n');	
	for(jbl_int32 j=0;j<tabs;jbl_stream_push_char(out,'\t'),++j);	jbl_stream_push_chars(out,UC"tren         :");
	if(!thi->tren)
		jbl_stream_push_chars(out,UC connection	[0]);
	else 
	{
		if(thi->tren&JWL_HTTP_TREN_CHUNKED	)jbl_stream_push_chars(out,UC tren[1]),jbl_stream_push_char(out,',');
		if(thi->tren&JWL_HTTP_TREN_COMPRESS	)jbl_stream_push_chars(out,UC tren[2]),jbl_stream_push_char(out,',');
		if(thi->tren&JWL_HTTP_TREN_DEFLATE	)jbl_stream_push_chars(out,UC tren[3]),jbl_stream_push_char(out,',');
		if(thi->tren&JWL_HTTP_TREN_GZIP		)jbl_stream_push_chars(out,UC tren[4]),jbl_stream_push_char(out,',');
		if(thi->tren&JWL_HTTP_TREN_IDENTITY	)jbl_stream_push_chars(out,UC tren[5]),jbl_stream_push_char(out,',');
	}
	jbl_stream_push_char(out,'\n');	
			

	if(thi->parameter)
	{
		for(jbl_int32 j=0;j<tabs;jbl_stream_push_char(out,'\t'),++j);	jbl_stream_push_chars(out,UC"parameter    :");																				;jbl_stream_push_char(out,'\n');
		++tabs;
		jbl_ht_foreach(thi->parameter,i)
		{
			for(jbl_int32 j=0;j<tabs;jbl_stream_push_char(out,'\t'),++j);//\t
			jbl_stream_push_string(out,i->k);
			for(jbl_int32 j=jbl_string_get_length(i->k);j<13;jbl_stream_push_char(out,' '),++j);//\t
			jbl_stream_push_char(out,':');
			if(jbl_var_is(i->v,jbl_string_operators))jbl_stream_push_string(out,i->v),jbl_stream_push_char(out,'\n');	
			else					jbl_var_view_put(i->v,out,0,tabs,0,NULL,NULL,NULL);
		}		
		--tabs;
	}
	if(thi->cookie)
	{
		for(jbl_int32 j=0;j<tabs;jbl_stream_push_char(out,'\t'),++j);	jbl_stream_push_chars(out,UC"cookie       :");																				;jbl_stream_push_char(out,'\n');
		++tabs;
		jbl_ht_foreach(thi->cookie,i)
		{
			for(jbl_int32 j=0;j<tabs;jbl_stream_push_char(out,'\t'),++j);//\t
			jbl_stream_push_string(out,i->k);
			for(jbl_int32 j=jbl_string_get_length(i->k);j<13;jbl_stream_push_char(out,' '),++j);//\t
			jbl_stream_push_char(out,':');
			if(jbl_var_is(i->v,jbl_string_operators))jbl_stream_push_string(out,i->v),jbl_stream_push_char(out,'\n');	
			else					jbl_var_view_put(i->v,out,0,tabs,0,NULL,NULL,NULL);
		}		
		--tabs;
	}
	if(thi->v)
		jbl_ht_foreach(thi->v,i)
		{
			for(jbl_int32 j=0;j<tabs;jbl_stream_push_char(out,'\t'),++j);//\t
			jbl_stream_push_string(out,i->k);
			for(jbl_int32 j=jbl_string_get_length(i->k);j<13;jbl_stream_push_char(out,' '),++j);//\t
			jbl_stream_push_char(out,':');
			if(jbl_var_is(i->v,jbl_string_operators))jbl_stream_push_string(out,i->v),jbl_stream_push_char(out,'\n');	
			else					jbl_var_view_put(i->v,out,0,tabs,0,NULL,NULL,NULL);
		}
	return this;
}
#endif




#endif
